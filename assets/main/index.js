System.register("chunks:///_virtual/AudioMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var o,u,t,n,s,e,a,c;return{setters:[function(i){o=i.createClass},function(i){u=i.cclegacy,t=i.AudioClip,n=i.resources,s=i.tween,e=i.Node,a=i.director,c=i.AudioSource}],execute:function(){u._RF.push({},"0901b+MopVGA4nwhYqhkyZs","AudioMgr",void 0),i("AudioMgr",function(){function i(){this._audioSource=void 0,this._audioRainSource=void 0,this._audioSound=void 0,this.isEnableMusic=!0,this.isEnableSound=!0;var i=new e;i.name="__audioMgr__",a.getScene().addChild(i),a.addPersistRootNode(i),this._audioSource=i.addComponent(c),this._audioSource.loop=!0;var o=new e;i.addChild(o),this._audioRainSource=o.addComponent(c),this._audioRainSource.loop=!0;var u=new e;i.addChild(u),this._audioSound=o.addComponent(c),this._audioSound.loop=!0}var u=i.prototype;return u.playOneShot=function(i,o){var u=this;void 0===o&&(o=1),this.isEnableSound&&(i instanceof t?this._audioSound.playOneShot(i,o):n.load(i,(function(i,t){i?console.log(i):u._audioSound.playOneShot(t,o)})))},u.play=function(i,o){var u=this;void 0===o&&(o=1),this.isEnableMusic&&(i instanceof t?(this._audioSource.clip=i,this._audioSource.play(),this.audioSource.volume=o):n.load(i,(function(i,t){i?console.log(i):(u._audioSource.clip=t,u._audioSource.play(),u.audioSource.volume=o)})))},u.stop=function(){this._audioSource.stop(),this._audioSource.volume=0},u.pause=function(){this._audioSource.pause(),this._audioRainSource.pause()},u.resume=function(){this._audioSource.play(),this._audioRainSource.play()},u.playRain=function(i){var o=this;if(!this.isEnableMusic)return this._audioSource.stop(),void this._audioRainSource.stop();i?n.load("audio/audio_rain",(function(i,u){i?console.log(i):(o._audioRainSource.clip=u,o._audioRainSource.play(),o._audioRainSource.volume=.6,o._audioSource.volume=.3)})):(s(this._audioRainSource).to(1,{volume:0}).call((function(){o._audioRainSource.stop()})).start(),s(this._audioSource).to(1,{volume:.5}).start())},u.setEnableMusic=function(i){this.isEnableMusic=i,this.isEnableMusic||this.stop()},u.setEnableSound=function(i){this.isEnableSound=i},u.toggleMusic=function(){this.isEnableMusic=!this.isEnableMusic,cc.sys.localStorage.setItem("isEnableMusic",this.isEnableMusic),this.isEnableMusic?this.play("audio/audio_bg_music",.5):this.stop()},u.toggleSound=function(){this.isEnableSound=!this.isEnableSound,cc.sys.localStorage.setItem("isEnableSound",this.isEnableSound)},o(i,[{key:"audioSource",get:function(){return this._audioSource}}],[{key:"inst",get:function(){return null==this._inst&&(this._inst=new i),this._inst}}]),i}())._inst=void 0,u._RF.pop()}}}));

System.register("chunks:///_virtual/Car.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./CarType.ts","./AudioMgr.ts","./GameConfig.ts"],(function(t){var e,i,n,o,s,a,h,r,d,g,p,c,l,u,y,C,_,m,v,f,P,T,A;return{setters:[function(t){e=t.inheritsLoose},function(t){i=t.cclegacy,n=t.js,o=t._decorator,s=t.randomRangeInt,a=t.Input,h=t.Sprite,r=t.BoxCollider2D,d=t.RigidBody2D,g=t.ProgressBar,p=t.Vec2,c=t.lerp,l=t.tween,u=t.v3,y=t.ERigidBody2DType,C=t.Color,_=t.ParticleSystem2D,m=t.UIOpacity,v=t.Component},function(t){f=t.GameManager},function(t){P=t.CarType},function(t){T=t.AudioMgr},function(t){A=t.gameConfig}],execute:function(){var I;i._RF.push({},"dc4f1okB5dDD5hgEfbKmw9q","Car",void 0);var O=n.IDGenerator,R=o.ccclass,M=(o.property,t("CarState",function(t){return t[t.UNDEFINED=-1]="UNDEFINED",t[t.MOVE_IN=0]="MOVE_IN",t[t.PARKING=1]="PARKING",t[t.PARKED=2]="PARKED",t[t.MOVE_OUT=3]="MOVE_OUT",t}({})));t("CarEvent",function(t){return t.WAITING="CAR_WAITING",t.PARKING="CAR_PARKING",t.PARKED="CAR_PARKED",t.MOVE_OUT="CAR_MOVE_OUT",t}({})),t("Car",R("Car")(I=function(t){function i(){for(var e,i=arguments.length,n=new Array(i),o=0;o<i;o++)n[o]=arguments[o];return(e=t.call.apply(t,[this].concat(n))||this).sprCar=void 0,e.sprCheck=void 0,e.pbTimer=void 0,e.path=void 0,e.speed=void 0,e.angle=void 0,e._isReverse=!1,e._isParked=!1,e._isDriverInside=!0,e._isGettingOut=!1,e._isOut=!1,e._isStart=!0,e._carId=void 0,e.boxCollider=void 0,e.rigidBody=void 0,e._lastTimeTurnAround=0,e._lastTimeReverse=0,e._state=M.UNDEFINED,e._timeParking=void 0,e._type=P.SUV,e._delayAngle=[],e._delayViewAngle=[],e}e(i,t);var n=i.prototype;return n.onLoad=function(){var t=f.getInstance()._levelCounter,e=A.getCarSpeed(t);this.speed=s(e[0],e[1]),this.node.on(a.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(a.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(a.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(a.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.sprCar=this.node.getChildByName("sprCar").getComponent(h),this.path=f.getInstance().getPathManager().getPath(),this.path.setCar(this),this._carId=O.global.getNewId(),this.boxCollider=this.node.getComponent(r),this.rigidBody=this.node.getComponent(d);var i=A.getTimeCarParking(t);this._timeParking=s(i[0],i[1]),this.pbTimer=this.node.getChildByName("pbTimer").getComponent(g),this.sprCheck=this.node.getChildByName("sprCheck").getComponent(h),this.sprCheck.node.active=!1,this.pbTimer.node.active=!1,this.pbTimer.progress=0},n.getCarId=function(){return this._carId},n.getPath=function(){return this.path},n.onTouchStart=function(t){if(this._state!==M.PARKING&&this._isDriverInside){this._isParked&&(this._isGettingOut=!0,this.path.setIsGettingOut(this._isGettingOut));t.target,t.getUILocation();this.path.onTouchStart(t),t.propagationStopped=!0}},n.onTouchMove=function(t){this.path.onTouchMove(t),t.propagationStopped=!0},n.onTouchEnd=function(t){this.path.onTouchEnd(t),t.propagationStopped=!0},n.onTouchCancel=function(t){this.path.onTouchCancel(t),t.propagationStopped=!0},n.start=function(){},n.setIsParked=function(t){this._isParked=t},n.update=function(t){this._isStart&&(this._isParked&&!this._isGettingOut||this._isOut||0!==this.path.getPositions().length&&this.moveWithPath(t))},n.getSpeed=function(){return this._isReverse?this.speed/2:this.speed},n.checkReverse=function(){var t=(new Date).getTime();this._lastTimeReverse=t,this._isReverse=!this._isReverse,this.isSlipping()||(this.sprCar.node.angle=this._isReverse?180:0)},n.isSlipping=function(){return f._instance.isRaining},n.moveWithPath=function(t){for(var e=t*this.getSpeed(),i=0,n=-1,o=this.path.getPositions();i<e&&n<o.length-1;)i+=0===++n?p.distance(this.node.position.toVec2(),o[n]):p.distance(o[n],o[n-1]);var s=new p(o[n].x,o[n].y),a=new p(o[n].x-this.node.position.x,o[n].y-this.node.position.y),h=180*Math.atan(a.y/a.x)/Math.PI-90+(a.x<0?-180:0);if(e<i){var r=i-e,d=0,g=this.node.position.toVec2();if(0===(d=p.distance(o[n],g)))s=o[n];else{var l=(d-r)/d;s.x=g.x+(o[n].x-g.x)*l,s.y=g.y+(o[n].y-g.y)*l}a=new p(s.x-g.x,s.y-g.y),h=(180*Math.atan2(a.y,a.x)/Math.PI-90)%360,h=this.normalizeAngle(h),Math.abs(h-this.angle)>150&&Math.abs(h-this.angle)<300&&this.checkReverse(),this.path.slicePositions(n)}else a=new p(o[n].x-this.node.position.x,o[n].y-this.node.position.y),h=(180*Math.atan2(a.y,a.x)/Math.PI-90)%360,h=this.normalizeAngle(h),this.path.slicePositions(o.length),this.onFinishPath();if(0==this._delayAngle.length)for(var u=0;u<10;++u)this._delayAngle.push(h),this._delayViewAngle.push(this._isReverse?180:0);else this._delayAngle.push(h),this._delayViewAngle.push(this._isReverse?180:0);if(this.angle=h,this.node.x=s.x,this.node.y=s.y,this.rigidBody.angularDamping=0,this.rigidBody.fixedRotation=!0,this.isSlipping()){var y=this._delayAngle.shift();this.node.angle=c(this.node.angle,y,1);var C=this._delayViewAngle.shift();this.sprCar.node.angle=C}else this._delayAngle.shift(),this._delayViewAngle.shift(),this.node.angle=c(this.node.angle,this.angle,1)},n.normalizeAngle=function(t){return(t%360+360)%360},n.getMidAngle=function(t,e){var i=(t=this.normalizeAngle(t))/2+(e=this.normalizeAngle(e))/2;return Math.abs(t-e)>180&&(i+=180),this.normalizeAngle(i)},n.getDeltaAngle=function(){return s(-10,10)},n.showGlowing=function(){var t=this.node.getChildByName("sprCarGlow0").getComponent(h),e=this.node.getChildByName("sprCarGlow1").getComponent(h);l(t.node).show().to(.35,{scale:u(1.5,1.25,1)}).hide().removeSelf().start(),e.node.scale=u(1.25,1.12,1),e.node.active=!1,l(e.node).delay(.2).call((function(){e.node.active=!0})).show().to(.4,{scale:u(1.6,1.3,1)}).hide().removeSelf().start()},n.doParking=function(){var t=this;this._state=M.PARKING,this._isParked=!0,this.pbTimer.node.active=!0,this.rigidBody.type=y.Static,this.showGlowing(),T.inst.playOneShot("audio/audio_ting"),f.getInstance().getCarManager().onCarDoParking(),l(this.pbTimer).to(this._timeParking,{progress:1}).start();var e=this.pbTimer.node.getChildByName("Bar").getComponent(h);e.color=new C(255,0,0,255),l(e).to(this._timeParking,{color:new C(255,255,0,255)}).to(this._timeParking,{color:new C(0,255,0,255)}).start(),this.scheduleOnce((function(){t.onFinishParking()}),this._timeParking)},n.onFinishParking=function(){this.rigidBody.type=y.Dynamic,this.node.getChildByName("ptcBlink").getComponent(_).resetSystem(),T.inst.playOneShot("audio/audio_ding"),f.getInstance().getCarManager().onCarParked(),this._state=M.PARKED,this._isParked=!0,this.sprCheck.node.active=!0,this.pbTimer.node.active=!1},n.onFinishPath=function(){this.path.isMatchPark()&&this.doParking(),this.path.isMatchOut()&&this.moveOut(),this.path.reset()},n.moveOut=function(){var t=this;this._isOut=!0,f.getInstance().incScore(),l(this.node.getComponent(m)).to(.3,{opacity:0}).call((function(){t.onFinishMoveOut()})).start()},n.onFinishMoveOut=function(){this.node.active=!1,this.node.removeFromParent(),f.getInstance().getCarManager().pushToPool(this)},n.reset=function(){this.node.active=!0,this.node.getComponent(m).opacity=255,this._isOut=!1,this._isParked=!1,this._isDriverInside=!0,this._isGettingOut=!1},n.readyToStart=function(){var t=this;T.inst.playOneShot("audio/audio_fx",.8),this._isStart=!0,this.rigidBody.enabled=!1,this.node.getComponent(m).opacity=200;l(this.node.getComponent(m)).to(.4,{opacity:100}).to(.4,{opacity:200}).to(.4,{opacity:100}).to(.4,{opacity:200}).to(.4,{opacity:100}).call((function(){t.ignoreCollider(2),t.rigidBody.enabled=!0})).start()},n.ignoreCollider=function(t){var e=this;void 0===t&&(t=3),this.rigidBody&&(this.rigidBody.enabledContactListener=!1),l(this.node.getComponent(m)).to(t/4,{opacity:100}).to(t/4,{opacity:200}).to(t/8,{opacity:100}).to(t/8,{opacity:200}).to(t/8,{opacity:100}).to(t/8,{opacity:255}).call((function(){e.rigidBody&&(e.rigidBody.enabledContactListener=!0)})).start()},n.getCarType=function(){return this._type},n.setCarView=function(t){this.node.getChildByName("sprCar").getChildByName("sprCarView").getComponent(h).spriteFrame=t,this.node.getChildByName("sprCarGlow0").getComponent(h).spriteFrame=t,this.node.getChildByName("sprCarGlow1").getComponent(h).spriteFrame=t},n.clearPath=function(){this.path.slicePositions(this.path.getPositions().length)},i}(v))||I);i._RF.pop()}}}));

System.register("chunks:///_virtual/CarManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Car.ts","./CarType.ts"],(function(a){var e,t,n,r,s,i,o,u,c,h,C,d,l,g,f;return{setters:[function(a){e=a.inheritsLoose,t=a.createForOfIteratorHelperLoose},function(a){n=a.cclegacy,r=a._decorator,s=a.resources,i=a.Prefab,o=a.instantiate,u=a.Node,c=a.UITransform,h=a.randomRangeInt,C=a.SpriteFrame,d=a.Component},function(a){l=a.GameManager},function(a){g=a.Car},function(a){f=a.CarType}],execute:function(){var m;n._RF.push({},"bdc76E2bGNGC7IZS8WqIwWN","CarManager",void 0);var p=r.ccclass;r.property,a("CarManager",p("CarManager")(m=function(a){function n(){for(var e,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return(e=a.call.apply(a,[this].concat(n))||this).suvSpriteFrames=new Array,e.carSpriteFrames=new Array,e.prefabCars=new Map,e.cars=[],e.pool=[],e.numCarsGen=2,e.timeGen=0,e._timeOutGenNewWave=void 0,e._numCarWaiting=0,e._numCarParking=0,e._numCarParked=0,e._scheduler=void 0,e._summonPos=[],e._summonAngle=[],e._nodeIn=[],e._numCarGen=0,e}e(n,a);var r=n.prototype;return r.onLoad=function(){l.getInstance().setCarManager(this),this.loadResources()},r.loadCarTextures=function(){var a=this,e=["hatchback","pickup","sedan","suv","van"];this.carSpriteFrames=[];for(var t=function(t){var n=[];s.loadDir("textures/cars/"+e[t],C,(function(e,r){for(var s=0;s<r.length;++s)n[s]=r[s];a.carSpriteFrames[t]=n,t===f.VAN&&a.loadCarPrefabs()}))},n=f.HATCHBACK;n<f.VAN+1;++n)t(n)},r.loadCarPrefabs=function(){var a=this;s.loadDir("prefabs/cars",i,(function(e,n){for(var r,s=t(n);!(r=s()).done;){var i=r.value;a.prefabCars[i.name]=i}a.onFinishLoadResources()}))},r.loadResources=function(){this.loadCarTextures()},r.getCars=function(){return this.cars},r.onFinishLoadResources=function(){l.getInstance().checkStartGame()},r.start=function(){},r.update=function(a){},r.pushToPool=function(a){this.cars=this.cars.filter((function(a){return a.getCarId()==a.getCarId()})),this.onCarFinished()},r.getNewCar=function(a){void 0===a&&(a=f.SUV);var e=this.prefabCars.PrefabCar;switch(a){case f.SUV:e=this.prefabCars.PrefabSUV;break;case f.HATCHBACK:e=this.prefabCars.PrefabHatchback;break;case f.PICKUP:e=this.prefabCars.PrefabPickup;break;case f.SEDAN:e=this.prefabCars.PrefabSedan;break;case f.VAN:e=this.prefabCars.PrefabVan;break;case f.TUT:e=this.prefabCars.PrefabCarTut}return o(e).getComponent(g)},r.genNewWave=function(){this._summonPos=l.getInstance().getParkingSlotManager().getSpawnPositions(),this._summonAngle=l.getInstance().getParkingSlotManager().getSpawnRotations();for(var a=0;a<this._summonPos.length;++a){var e=new u;this.node.addChild(e),this._nodeIn.push(e),e.setPosition(this._summonPos[a]),e.angle=this._summonAngle[a],e.addComponent(c).scheduleOnce(this.genCar.bind(this,a),h(1,5))}},r.getRandomSpriteCar=function(a){var e=this.carSpriteFrames[a];return e[h(0,e.length)]},r.genCar=function(a){var e=h(f.HATCHBACK,f.VAN+1),t=this.getNewCar(e);t.setCarView(this.getRandomSpriteCar(e)),t.reset(),t.node.position=this._nodeIn[a].position,t.node.angle=this._nodeIn[a].angle,this.node.addChild(t.node),this.cars.push(t),t.readyToStart(),this.onCarWaiting();var n=this._nodeIn[a].getComponent(c),r=l.getInstance().getTimeGenWave(),s=h(r[0],r[1]);n.scheduleOnce(this.genCar.bind(this,a),s)},r.clearCars=function(){this.cars.forEach((function(a){a.unscheduleAllCallbacks(),a.node.removeFromParent()})),this.cars=[],this.node.removeAllChildren()},r.clearCarsPath=function(){this.cars.forEach((function(a){a.clearPath()}))},r.clearOnReady=function(){this._timeOutGenNewWave&&clearTimeout(this._timeOutGenNewWave),this._scheduler&&this.unschedule(this._scheduler),this.unscheduleAllCallbacks(),this.clearCars(),this._numCarWaiting=0,this._numCarParking=0,this._numCarParked=0,this.updateCarsStatus(),this._numCarGen=0,this.clearScheduleGenCars()},r.clearScheduleGenCars=function(){this._nodeIn.forEach((function(a){var e=a.getComponent(c);e&&e.unscheduleAllCallbacks(),a.removeFromParent()})),this._nodeIn=[]},r.updateCarsStatus=function(){l.getInstance().updateCarsStatus(this._numCarWaiting,this._numCarParking,this._numCarParked)},r.onStartGame=function(){this._numCarWaiting=0,this._numCarParking=0,this._numCarParked=0,this.updateCarsStatus(),this.numCarsGen=2,this.genNewWave()},r.onEndGame=function(){this._timeOutGenNewWave&&clearTimeout(this._timeOutGenNewWave),this._scheduler&&this.unschedule(this._scheduler),this.unscheduleAllCallbacks()},r.onCarWaiting=function(){this._numCarWaiting++,this.updateCarsStatus()},r.onCarDoParking=function(){this._numCarWaiting--,this._numCarParking++,this.updateCarsStatus()},r.onCarParked=function(){this._numCarParking--,this._numCarParked++,this.updateCarsStatus()},r.onCarFinished=function(){this._numCarParked--,this.updateCarsStatus()},r.genTutCar=function(){for(var a=l.getInstance().getParkingSlotManager().getSpawnPositions(),e=l.getInstance().getParkingSlotManager().getSpawnRotations(),t=0;t<a.length;++t){var n=this.getNewCar(f.TUT);n.reset(),n.node.position=a[t],n.node.angle=e[t],this.node.addChild(n.node),n.readyToStart()}},n}(d))||m);n._RF.pop()}}}));

System.register("chunks:///_virtual/CarTut.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CarType.ts","./Car.ts","./GameManager.ts","./AudioMgr.ts"],(function(t){var e,n,o,i,a,r,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator},function(t){i=t.CarType},function(t){a=t.Car},function(t){r=t.GameManager},function(t){s=t.AudioMgr}],execute:function(){var u;n._RF.push({},"fa704qNjOlOm7Iu4/98fBRJ","CarTut",void 0);var c=o.ccclass;o.property,t("CarTut",c("CarTut")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.readyToStart=function(){s.inst.playOneShot("audio/audio_fx",.8),this._isStart=!0,this.rigidBody.enabled=!0},o.onLoad=function(){t.prototype.onLoad.call(this),this._type=i.HATCHBACK,this.speed=80,this._timeParking=5},o.doParking=function(){t.prototype.doParking.call(this),r.getInstance().sceneGame.showTutGuide("Great, the car is parked perfectly\nLet's wait for it to finish parking.")},o.onFinishParking=function(){t.prototype.onFinishParking.call(this),r.getInstance().sceneGame.showTutGuide("Well done, now drag the car to the OUT gate to get point")},o.onFinishMoveOut=function(){t.prototype.onFinishMoveOut.call(this),r.getInstance().sceneGame.showTutGuide("Good job, you've completed the parking and earned point, get ready to enjoy the game!"),setTimeout((function(){r.getInstance().startGameAfterTut()}),3e3)},n}(a))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/CarType.ts",["cc"],(function(e){var r;return{setters:[function(e){r=e.cclegacy}],execute:function(){r._RF.push({},"b8710xV/XhBGrV9AYRsUGRb","CarType",void 0);e("CarType",function(e){return e[e.TUT=-99]="TUT",e[e.UNDEFINED=-1]="UNDEFINED",e[e.HATCHBACK=0]="HATCHBACK",e[e.PICKUP=1]="PICKUP",e[e.SEDAN=2]="SEDAN",e[e.SUV=3]="SUV",e[e.VAN=4]="VAN",e}({}));r._RF.pop()}}}));

System.register("chunks:///_virtual/GameBridge.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameConfig.ts","./GameManager.ts","./UserModule.ts"],(function(e){var t,a,i,n,s,r;return{setters:[function(e){t=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){i=e.cclegacy},function(e){n=e.updateGameConfig},function(e){s=e.GameManager},function(e){r=e.UserModule}],execute:function(){i._RF.push({},"9f7feGrDqBHbaOAUnU/rPEk","GameBridge",void 0);e("default",{state:{userId:"Ickui7l1Ua1Cf1oQBCbu",token:"",apiConfig:{baseUrl:"https://us-central1-exchange-ca4ee.cloudfunctions.net",userApi:"userApi",parkingApi:"parkingApi",version:"1.0"}},init:function(){window.ReactNativeBridge&&this.updateState(window.ReactNativeBridge),document.addEventListener("message",this.handleNativeMessage),window.addEventListener("message",this.handleNativeMessage)},handleNativeMessage:function(e){var t=e.data;try{console.log("Receive Event Message: ",t),"string"==typeof t&&(t=JSON.parse(t))}catch(e){}if(t&&"object"==typeof t)switch(t.type){case"PAUSE":s.getInstance().sceneGame.pauseGame();break;case"RESUME":s.getInstance().sceneGame.resumeGame();break;case"INIT":this.updateState(t);break;case"CONFIG":n(t.gameConfig)}},updateState:function(e){this.state.userId=e.userId,this.state.token=e.token,e.apiConfig&&(e.apiConfig.baseUrl&&(this.state.apiConfig.baseUrl=e.apiConfig.baseUrl),e.apiConfig.userApi&&(this.state.apiConfig.userApi=e.apiConfig.userApi),e.apiConfig.parkingApi&&(this.state.apiConfig.parkingApi=e.apiConfig.parkingApi),e.apiConfig.version&&(this.state.apiConfig.version=e.apiConfig.version)),console.log("[GameBridge] Updated credentials",this.state),r.getInstance().onStartLobby()},fetchUserProfile:function(){var e=this;return t(a().mark((function t(){var i,n,s,r,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.state.apiConfig,n=i.baseUrl,s=i.userApi,n&&s&&e.state.userId){t.next=3;break}throw new Error("Missing API config or userId");case 3:return r=n+"/"+s+"/"+e.version+"/users/"+e.state.userId,t.next=6,fetch(r,{headers:{Authorization:"Bearer "+e.state.token}});case 6:if((o=t.sent).ok){t.next=9;break}throw new Error("Request failed: "+o.status);case 9:return t.abrupt("return",o.json());case 10:case"end":return t.stop()}}),t)})))()},sendVibrate:function(){var e;window.triggerVibrate?window.triggerVibrate():null!=(e=window.ReactNativeWebView)&&e.postMessage&&window.ReactNativeWebView.postMessage("vibrate")}});i._RF.pop()}}}));

System.register("chunks:///_virtual/GameConfig.ts",["cc"],(function(i){var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"5c931DbkdpIlZ6V08RGcEPO","GameConfig",void 0);var n=i("gameConfig",{buildMode:"production",numZone:4,maxLevel:7,timeCarParking:[[11,20],[10,22],[10,25],[9,25],[9,30],[8,33]],carSpeed:[[40,150],[50,150],[50,160],[50,170],[55,170],[45,180]],levelChallenges:[{isFogging:!1,isRaining:!1,isPedestrian:!1,isPatrol:!1,warning:""},{isFogging:!0,isRaining:!1,isPedestrian:!1,isPatrol:!1,warning:"Foggy Weather"},{isFogging:!1,isRaining:!0,isPedestrian:!1,isPatrol:!1,warning:"Raining Weather"},{isFogging:!1,isRaining:!1,isPedestrian:!0,isPatrol:!1,warning:"Watch out for pedestrians!!!"},{isFogging:!1,isRaining:!1,isPedestrian:!1,isPatrol:!0,warning:"Give way to the patrol car!"},{isFogging:!0,isRaining:!1,isPedestrian:!0,isPatrol:!1,warning:"Watch out things hidden in the fog!!!"},{isFogging:!1,isRaining:!0,isPedestrian:!1,isPatrol:!0,warning:"Be careful on slippery roads!"},{isFogging:!0,isRaining:!1,isPedestrian:!1,isPatrol:!0,warning:"Watch out things hidden in the fog!!!"}],timeGenWave:[[12,26],[11,25],[11,25],[10,23],[10,20],[9,18]],numPedestrian:[2,4],timeOutGenPedestrian:[8,18],getTimeCarParking:function(i){return this.timeCarParking[i]?this.timeCarParking[i]:this.timeCarParking[this.timeCarParking.length-1]},getCarSpeed:function(i){return this.carSpeed[i]?this.carSpeed[i]:this.carSpeed[this.carSpeed.length-1]},getTimeGenNewWave:function(i){return this.timeGenWave[i]?this.timeGenWave[i]:this.timeGenWave[this.timeGenWave.length-1]}});function t(i){return null!==i&&"object"==typeof i&&!Array.isArray(i)}function a(i,e,n){if(void 0===n&&(n=new Map),t(i)&&t(e))for(var r in e)t(e[r])?(i[r]||(i[r]={}),n.has(e[r])?i[r]=n.get(e[r]):(n.set(e[r],{}),a(i[r],e[r],n))):i[r]=e[r];return i}i("updateGameConfig",(function(e){console.log("Update new config: "),console.log(n),console.log(e),n=i("gameConfig",a(n,e))}));e._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Car.ts","./AudioMgr.ts","./UserModule.ts","./Walker.ts","./GameBridge.ts","./GameConfig.ts"],(function(e){var t,n,i,a,s,o,r,h,c,l,u,g,d,m,f,v,p,G,C,M,w,S;return{setters:[function(e){t=e.createForOfIteratorHelperLoose},function(e){n=e.cclegacy,i=e._decorator,a=e.director,s=e.Label,o=e.UIOpacity,r=e.v3,h=e.tween,c=e.Vec2,l=e.randomRangeInt,u=e.resources,g=e.Prefab,d=e.instantiate,m=e.PhysicsSystem2D,f=e.Contact2DType},function(e){v=e.Car,p=e.CarState},function(e){G=e.AudioMgr},function(e){C=e.UserModule},function(e){M=e.Walker},function(e){w=e.default},function(e){S=e.gameConfig}],execute:function(){n._RF.push({},"98a61/kBkhIx6OCjAMltUol","GameManager",void 0);i.ccclass,i.property;e("GameManager",function(){function e(){this.parkingSlotManager=void 0,this.pathManager=void 0,this.carManager=void 0,this.gameTime=-1,this.score=0,this.life=3,this.isInTut=!1,this.sceneGame=void 0,this._level=0,this._levelCounter=0,this.isFogging=!1,this.isRaining=!1,this.isWalkers=!1,this.isPolice=!1,this.isFirstRun=!0,this.walkerManager=void 0,this.zoneId=void 0,this.isForceShowTutLevel=!1,this.nodeLoading=void 0;var e=m.instance;e.enable=!0,e.fixedTimeStep=1/60,e.on(f.BEGIN_CONTACT,this.onBeginContact,this),e.on(f.END_CONTACT,this.onEndContact,this)}e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var n=e.prototype;return n.startGameAfterTut=function(){this.isInTut=!1,cc.sys.localStorage.setItem("isShowTutAgain",!1),this.sceneGame.loadZone(this.zoneId),this.startGame()},n.showTutLevelOnStartGame=function(){this.sceneGame.showTutLevel(),this.isInTut=!0},n.checkStartGame=function(){if(this.isForceShowTutLevel)return this.isForceShowTutLevel=!1,this.sceneGame.showTutLevel(),void(this.isInTut=!0);this.isFirstRun?(this.isFirstRun=!1,"false"!=cc.sys.localStorage.getItem("isShowTutAgain")?this.sceneGame.showNodeTut():this.startGame()):this.startGame()},n.startGame=function(){var e=this;if(a.resume(),this.pathManager.clearPaths(),this.carManager.clearOnReady(),this.gameTime=0,this.life=3,this.score=0,this.sceneGame.setLife(this.life),this.sceneGame.setScore(this.score),this.sceneGame.setVisibleUI(!0),this._level=0,this._levelCounter=0,this.checkUpdateLevel(),"dev"===S.buildMode)return this.carManager.onStartGame(),this.sceneGame.cheatCounter=20,void this.sceneGame.devShowCheat();var t=this.sceneGame.node.getChildByPath("NodeUI/lbCountdown").getComponent(s);t.node.active=!0;var n=t.node.getComponent(o);t.node.scale=r(0,0,0),n.opacity=255,t.string="Ready!!!",G.inst.playOneShot("audio/countdown/ready"),h(t.node).to(1,{scale:r(1,1,1)},{easing:"backOut"}).delay(.5).call((function(){t.string="3",G.inst.playOneShot("audio/countdown/3")})).then(h(n).to(1,{opacity:50})).call((function(){t.string="2",n.opacity=255,G.inst.playOneShot("audio/countdown/2")})).then(h(n).to(1,{opacity:50})).call((function(){t.string="1",n.opacity=255,G.inst.playOneShot("audio/countdown/1")})).then(h(n).to(1,{opacity:50})).call((function(){t.string="Go!!!",G.inst.playOneShot("audio/countdown/go"),n.opacity=255,e.carManager.onStartGame()})).then(h(n).to(1,{opacity:0})).call((function(){t.node.active=!1})).start()},n.showEffectEndGame=function(e){var t=this;this.carManager.clearCarsPath(),this.walkerManager.stopAllWalers(),this.sceneGame.showEffectHit(),this.sceneGame.showExplosion(e),setTimeout((function(){t.endGame()}),1800)},n.sendUpdatePoint=function(){C.getInstance().sendUpdatePoint(this.score,this.zoneId)},n.endGame=function(){a.pause(),this.sendUpdatePoint(),this.sceneGame.showGameOver(this.score),this.carManager.onEndGame(),this.walkerManager.onEndGame(),G.inst.playOneShot("audio/audio_end_game")},n.onBeginContact=function(e,n,i){var a,s=this,o=0,r=e.node.getComponent(v),h=n.node.getComponent(v);r&&r.ignoreCollider(3),h&&h.ignoreCollider(3);var l=i.getWorldManifold().points;a=0,o=0;for(var u,g=t(l);!(u=g()).done;){var d=u.value;a+=d.x,o+=d.y}a/=l.length,o/=l.length;var m=!0;if(1===e.group||1===n.group){if(r&&r._state===p.PARKING){m=!1;var f=n.getComponent(M);f&&(f.stop(),f.node.removeFromParent())}if(h&&h._state===p.PARKING){m=!1;var C=e.getComponent(M);C&&(C.stop(),C.node.removeFromParent())}m&&(this.life=0,this.sceneGame.setLife(this.life))}else{if(16===e.group||16===n.group)return;this.isInTut||(this.life--,this.sceneGame.setLife(this.life))}this.life<=0&&!this.isInTut?(this.showEffectEndGame(new c(a,o)),G.inst.playOneShot("audio/audio_car_crash"),this.sceneGame.runShakeScreen(),w.sendVibrate()):m&&(this.sceneGame.showBoom(new c(a,o)),G.inst.playOneShot("audio/audio_car_crash"),this.sceneGame.runShakeScreen(),w.sendVibrate()),this.isInTut&&(this.getCarManager().clearCars(),this.getPathManager().clearPaths(),setTimeout((function(){s.getCarManager().genTutCar(),s.sceneGame.showTutGuide("Drag and drop the car into the parking slot, avoiding collisions with the terrain")})))},n.onEndContact=function(e,t,n){},n.setParkingSlotManager=function(e){this.parkingSlotManager=e},n.getParkingSlotManager=function(){return this.parkingSlotManager},n.setPathManager=function(e){this.pathManager=e},n.getPathManager=function(){return this.pathManager},n.setCarManager=function(e){this.carManager=e},n.getCarManager=function(){return this.carManager},n.setWalkerManager=function(e){this.walkerManager=e},n.getWalerManager=function(){return this.walkerManager},n.update=function(e){this.gameTime+=e},n.setSceneGame=function(e){this.sceneGame=e},n.incScore=function(){G.inst.playOneShot("audio/audio_bonus"),this.score++,this.sceneGame.setScore(this.score),this.score%10==0&&(this._levelCounter++,this._level++,this._levelCounter>S.maxLevel&&(this._level=l(0,S.maxLevel+1)),this.checkUpdateLevel())},n.checkUpdateLevel=function(){var e,t=S.levelChallenges[this._level];this.isFogging=t.isFogging,this.isRaining=t.isRaining,this.isWalkers=t.isPedestrian,this.isPolice=t.isPatrol,e=t.warning,this.sceneGame.setFog(this.isFogging),this.sceneGame.setRain(this.isRaining),this.sceneGame.setPolice(this.isPolice),this.isFogging||this.isRaining||this.sceneGame.resetShadows(),e.length>0&&this.sceneGame.showLevelWarning(e),this.isWalkers?this.walkerManager.genNewWave():(this.walkerManager.clearWalkers(),this.walkerManager.unscheduleAllCallbacks())},n.setCurrentZoneId=function(e){e>=S.numZone||(this.zoneId=e)},n.getCurrentZoneId=function(){return this.zoneId},n.updateCarsStatus=function(e,t,n){this.sceneGame.updateCarsStatus(e,t,n)},n.getTimeGenWave=function(){return S.getTimeGenNewWave(this._levelCounter)},n.setForceShowTutLevel=function(e){this.isForceShowTutLevel=e},n.loadNodeLoading=function(){var e=this;u.load("prefabs/NodeLoading",g,(function(t,n){e.nodeLoading=d(n),e.nodeLoading._persistNode=!0}))},n.showLoading=function(){if(this.nodeLoading){var e=a.getScene().getChildByName("Canvas");e&&(this.nodeLoading.removeFromParent(),e.addChild(this.nodeLoading),this.nodeLoading.active=!0)}else console.log("XB")},n.hideLoading=function(){this.nodeLoading&&(this.nodeLoading.active=!1)},e}())._instance=void 0,n._RF.pop()}}}));

System.register("chunks:///_virtual/GateOut.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,o;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,r=t._decorator,o=t.Component}],execute:function(){var u;n._RF.push({},"9e6cbddZN1NdpDWIm1Cd0EX","GateOut",void 0);var c=r.ccclass;r.property,t("GateOut",c("GateOut")(u=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var r=n.prototype;return r.start=function(){},r.update=function(t){},n}(o))||u);n._RF.pop()}}}));

System.register("chunks:///_virtual/Hatchback.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CarType.ts","./Car.ts"],(function(t){var c,o,r,n,a;return{setters:[function(t){c=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator},function(t){n=t.CarType},function(t){a=t.Car}],execute:function(){var e;o._RF.push({},"36372Bx6lZOr7KwBIfuJEKP","Hatchback",void 0);var i=r.ccclass;r.property,t("Hatchback",i("Hatchback")(e=function(t){function o(){return t.apply(this,arguments)||this}return c(o,t),o.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._type=n.HATCHBACK},o}(a))||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/LeaderboardItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Utils.ts"],(function(e){var r,t,i,n,o,a,l,u,s,c;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){o=e.cclegacy,a=e._decorator,l=e.Label,u=e.Sprite,s=e.Component},function(e){c=e.formatNumber}],execute:function(){var f,b,p,m,h,d,g,y,_,v,I;o._RF.push({},"66826avNqZOO6uSVMEW+2w+","LeaderboardItem",void 0);var N=a.ccclass,w=a.property;e("LeaderboardItem",(f=N("LeaderboardItem"),b=w(l),p=w(l),m=w(l),h=w(u),f((y=r((g=function(e){function r(){for(var r,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return(r=e.call.apply(e,[this].concat(o))||this)._info=void 0,i(r,"lbName",y,n(r)),i(r,"lbScore",_,n(r)),i(r,"lbRank",v,n(r)),i(r,"sprAvatar",I,n(r)),r}t(r,e);var o=r.prototype;return o.setInfo=function(e){this._info=e},o.updateInfoView=function(){this.lbName.string=this._info.fullName,!this._info.fullName&&this._info.userId&&(this.lbName.string=this._info.userId),this.lbScore.string=c(this._info.gamePoint),this.lbRank.string=Number(this._info.rank)+1+""},r}(s)).prototype,"lbName",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=r(g.prototype,"lbScore",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=r(g.prototype,"lbRank",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=r(g.prototype,"sprAvatar",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/LeaderboardMgr.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LeaderboardItem.ts"],(function(e){var r,t,a,o,n,i,d,l,s,u,c,h,p;return{setters:[function(e){r=e.applyDecoratedDescriptor,t=e.inheritsLoose,a=e.initializerDefineProperty,o=e.assertThisInitialized,n=e.asyncToGenerator,i=e.regeneratorRuntime},function(e){d=e.cclegacy,l=e._decorator,s=e.Prefab,u=e.instantiate,c=e.Component,h=e.randomRangeInt},function(e){p=e.LeaderboardItem}],execute:function(){var f,m,b,g,y;d._RF.push({},"3981fDs85RLXJ0exA/S4htg","LeaderboardMgr",void 0);var I=l.ccclass,v=l.property;e("LeaderboardMgr",(f=I("LeaderboardMgr"),m=v(s),f((y=r((g=function(e){function r(){for(var r,t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return r=e.call.apply(e,[this].concat(n))||this,a(r,"prefabLeaderboardItem",y,o(r)),r._leaderboardInfo=[],r._leaderboardItems=[],r}t(r,e);var d=r.prototype;return d.onLoad=function(){},d.updateLeaderboard=function(){var e=n(i().mark((function e(){var r,t,a,o,d;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(){return t[h(0,t.length)]+t[h(0,t.length)]},r=function(e){return new Promise((function(r){return setTimeout(r,1e3*e)}))},console.log("Update leaderboard"),t=["Time","Past","Future","Dev","Fly","Flying","Soar","Soaring","Power","Falling","Fall","Jump","Cliff","Mountain","Rend","Red","Blue","Green","Yellow","Gold","Demon","Demonic","Panda","Cat","Kitty","Kitten","Zero","Memory","Trooper","XX","Bandit","Fear","Light","Glow","Tread","Deep","Deeper","Deepest","Mine","Your","Worst","Enemy","Hostile","Force","Video","Game","Donkey","Mule","Colt","Cult","Cultist","Magnum","Gun","Assault","Recon","Trap","Trapper","Redeem","Code","Script","Writer","Near","Close","Open","Cube","Circle","Geo","Genome","Germ","Spaz","Shot","Echo","Beta","Alpha","Gamma","Omega","Seal","Squid","Money","Cash","Lord","King","Duke","Rest","Fire","Flame","Morrow","Break","Breaker","Numb","Ice","Cold","Rotten","Sick","Sickly","Janitor","Camel","Rooster","Sand","Desert","Dessert","Hurdle","Racer","Eraser","Erase","Big","Small","Short","Tall","Sith","Bounty","Hunter","Cracked","Broken","Sad","Happy","Joy","Joyful","Crimson","Destiny","Deceit","Lies","Lie","Honest","Destined","Bloxxer","Hawk","Eagle","Hawker","Walker","Zombie","Sarge","Capt","Captain","Punch","One","Two","Uno","Slice","Slash","Melt","Melted","Melting","Fell","Wolf","Hound","Legacy","Sharp","Dead","Mew","Chuckle","Bubba","Bubble","Sandwich","Smasher","Extreme","Multi","Universe","Ultimate","Death","Ready","Monkey","Elevator","Wrench","Grease","Head","Theme","Grand","Cool","Kid","Boy","Girl","Vortex","Paradox"],o=function(){var e=n(i().mark((function e(){var t,o,n,d,l;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(1);case 2:for(t=[],o=h(12,22),n=0;n<o;++n)d=a(),l=h(0,99999999),1,t.push({name:d,score:l,rank:1});return t.sort((function(e,r){return r.score-e.score})),t.forEach((function(e,r){e.rank=r})),e.abrupt("return",t);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=8,o();case 8:d=e.sent,this._leaderboardInfo=d,console.log(this._leaderboardInfo),this.updateView();case 12:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),d.updateLeaderboardInfo=function(e){this._leaderboardInfo=e,console.log(this._leaderboardInfo),this.updateView()},d.updateView=function(){if(this._leaderboardItems.length<this._leaderboardInfo.length)for(var e=this.node.getChildByPath("svLeaderBoard/view/content"),r=this._leaderboardItems.length,t=0;t<this._leaderboardInfo.length-r;++t){var a=u(this.prefabLeaderboardItem);a.active=!1,e.addChild(a),this._leaderboardItems.push(a.getComponent(p))}for(var o=0;o<this._leaderboardItems.length;++o)if(o>=this._leaderboardInfo.length)this._leaderboardItems[o].node.active=!1;else{var n=this._leaderboardItems[o];this._leaderboardItems[o].node.active=!0,n.setInfo(this._leaderboardInfo[o]),n.updateInfoView()}},r}(c)).prototype,"prefabLeaderboardItem",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=g))||b));d._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioMgr.ts","./Car.ts","./CarManager.ts","./GameBridge.ts","./GameConfig.ts","./GameManager.ts","./GateOut.ts","./MyButton.ts","./NodeLoading.ts","./NodeTutorial.ts","./ParkingSlot.ts","./ParkingSlotManager.ts","./Path.ts","./PathManager.ts","./UserModule.ts","./Utils.ts","./Walker.ts","./WalkerManager.ts","./CarTut.ts","./CarType.ts","./Hatchback.ts","./Pickup.ts","./Sedan.ts","./Suv.ts","./Van.ts","./LeaderboardItem.ts","./LeaderboardMgr.ts","./SceneGame.ts","./SceneMain.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MyButton.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts"],(function(t){var o,n,u,e,r;return{setters:[function(t){o=t.inheritsLoose},function(t){n=t.cclegacy,u=t._decorator,e=t.Button},function(t){r=t.AudioMgr}],execute:function(){var c;n._RF.push({},"4f6e3OwOq9F8q9YGpoHefKS","MyButton",void 0);var i=u.ccclass;u.property,t("MyButton",i("MyButton")(c=function(t){function n(){return t.apply(this,arguments)||this}return o(n,t),n.prototype._onTouchEnded=function(o){t.prototype._onTouchEnded.call(this,o),r.inst.playOneShot("audio/audio_button_press")},n}(e))||c);n._RF.pop()}}}));

System.register("chunks:///_virtual/NodeLoading.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(o){var t,n,e,r;return{setters:[function(o){t=o.inheritsLoose},function(o){n=o.cclegacy,e=o._decorator,r=o.Component}],execute:function(){var i;n._RF.push({},"50560SYpPFLj4e/l8oBPLAN","NodeLoading",void 0);var c=e.ccclass;e.property,o("NodeLoading",c("NodeLoading")(i=function(o){function n(){return o.apply(this,arguments)||this}t(n,o);var e=n.prototype;return e.start=function(){},e.update=function(o){},n}(r))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/NodeTutorial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts"],(function(t){var e,n,o,a,r,i,c,s;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,a=t.Label,r=t.Toggle,i=t.PageView,c=t.Component},function(t){s=t.GameManager}],execute:function(){var l;n._RF.push({},"133971DyZ5Nm4J/ekaryWB4","NodeTutorial",void 0);var u=o.ccclass;o.property,t("NodeTutorial",u("NodeTutorial")(l=function(t){function n(){for(var e,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))||this).lbStart=void 0,e}e(n,t);var o=n.prototype;return o.start=function(){},o.onLoad=function(){this.lbStart=this.node.getChildByPath("btnStart/lbStart").getComponent(a),this.lbStart.string="Skip"},o.onTouchStart=function(){this.node.active=!1,s.getInstance().startGame();var t=!this.node.getChildByName("ToggleCheck").getComponent(r).isChecked;cc.sys.localStorage.setItem("isShowTutAgain",t)},o.checkShowTutStart=function(){var t=this.node.getChildByName("pvTutorial").getComponent(i);t.getCurrentPageIndex()==t.getPages().length-1?this.lbStart.string="Start Now":this.lbStart.string="Skip"},o.onTouchQuickTutorial=function(){this.node.active=!1,s.getInstance().showTutLevelOnStartGame()},n}(c))||l);n._RF.pop()}}}));

System.register("chunks:///_virtual/ParkingSlot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CarType.ts"],(function(t){var n,r,o,e,c;return{setters:[function(t){n=t.inheritsLoose},function(t){r=t.cclegacy,o=t._decorator,e=t.Component},function(t){c=t.CarType}],execute:function(){var a;r._RF.push({},"d9791wZ6oJNPJlAmlYMDtFl","ParkingSlot",void 0);var i=o.ccclass;o.property,t("ParkingLot",i("ParkingLot")(a=function(t){function r(){for(var n,r=arguments.length,o=new Array(r),e=0;e<r;e++)o[e]=arguments[e];return(n=t.call.apply(t,[this].concat(o))||this)._type=c.SUV,n}n(r,t);var o=r.prototype;return o.onLoad=function(){},o.start=function(){},o.update=function(t){},o.getCarType=function(){return this._type},r}(e))||a);r._RF.pop()}}}));

System.register("chunks:///_virtual/ParkingSlotManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ParkingSlot.ts","./GameManager.ts","./GateOut.ts"],(function(t){var n,o,e,a,i,r,s,u,c;return{setters:[function(t){n=t.inheritsLoose,o=t.createForOfIteratorHelperLoose},function(t){e=t.cclegacy,a=t._decorator,i=t.resources,r=t.Component},function(t){s=t.ParkingLot},function(t){u=t.GameManager},function(t){c=t.GateOut}],execute:function(){var l;e._RF.push({},"c2f90ToSQdMwbNO1HNmeyTD","ParkingSlotManager",void 0);var d=a.ccclass;a.property,t("ParkingSlotManager",d("ParkingSlotManager")(l=function(t){function e(){for(var n,o=arguments.length,e=new Array(o),a=0;a<o;a++)e[a]=arguments[a];return(n=t.call.apply(t,[this].concat(e))||this).prefabParkingLot=null,n.parkingLots=[],n.gateOuts=[],n.spawnPositions=[],n.currentZone=void 0,n.spawnRotations=void 0,n}n(e,t);var a=e.prototype;return a.onLoad=function(){u.getInstance().setParkingSlotManager(this),this.loadResources()},a.loadResources=function(){var t=this;i.load("prefabs/PrefabParkingLot",(function(n,o){t.prefabParkingLot=o,t.onFinishLoadResources()}))},a.getParkingSlots=function(){return this.parkingLots},a.getGateOuts=function(){return this.gateOuts},a.addParkingSlotInNode=function(t){if(t.getComponent(s))this.parkingLots.push(t.getComponent(s));else for(var n,e=o(t.children);!(n=e()).done;){var a=n.value;this.addParkingSlotInNode(a)}},a.onFinishLoadResources=function(){},a.start=function(){},a.update=function(t){},a.loadZone=function(t){void 0===t&&(t=4);for(var n,e=o(this.node.children);!(n=e()).done;){n.value.active=!1}this.currentZone=this.node.getChildByName("Zone"+t),this.currentZone.active=!0,this.loadParkingSlot(),this.loadGateOuts(),this.loadGateIns()},a.loadParkingSlot=function(){this.parkingLots=[];var t=this.currentZone.getChildByName("NodeSlots");this.addParkingSlotInNode(t)},a.loadGateOuts=function(){this.gateOuts=[];for(var t,n=this.currentZone.getChildByName("NodeGateOuts"),e=o(n.children);!(t=e()).done;){var a=t.value;a.getComponent(c)&&this.gateOuts.push(a.getComponent(c))}},a.loadGateIns=function(){this.spawnPositions=[],this.spawnRotations=[];for(var t,n=this.currentZone.getChildByName("NodeGateIns"),e=o(n.children);!(t=e()).done;){var a=t.value;this.spawnPositions.push(a.position),this.spawnRotations.push(a.angle)}},a.getSpawnPositions=function(){return[].concat(this.spawnPositions)},a.getSpawnRotations=function(){return[].concat(this.spawnRotations)},a.getNodeGround=function(){return this.currentZone.getChildByName("NodeGround")},e}(r))||l);e._RF.pop()}}}));

System.register("chunks:///_virtual/Path.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./AudioMgr.ts"],(function(t){var i,e,s,n,o,a,r,h,c,p,g,u,d,l,f,_,m,y;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,s=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,a=t._decorator,r=t.Graphics,h=t.SpriteFrame,c=t.Sprite,p=t.Input,g=t.view,u=t.Node,d=t.Vec3,l=t.Color,f=t.UITransform,_=t.Component},function(t){m=t.GameManager},function(t){y=t.AudioMgr}],execute:function(){var C,v,T,H,w,x,M;o._RF.push({},"a615d2MLztBULrqEMVRTglw","Path",void 0);var G=a.ccclass,I=a.property;t("Path",(C=G("Path"),v=I(r),T=I(h),C((x=i((w=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),a=0;a<e;a++)o[a]=arguments[a];return(i=t.call.apply(t,[this].concat(o))||this).positions=[],i.sprHead=void 0,s(i,"graphics",x,n(i)),i.ParkingSlotManager=null,i._isMatchPark=void 0,i._isGettingOut=!1,i._isMatchOut=!1,i._isDrawing=!1,i._deltaX=0,i._deltaY=0,i._car=void 0,s(i,"sprfArrow",M,n(i)),i.arrows=[],i}e(i,t);var o=i.prototype;return o.onLoad=function(){this.sprHead=this.node.getChildByName("sprHead").getComponent(c),this.sprHead.node.on(p.EventType.TOUCH_START,this.onTouchHeadStart,this),this.sprHead.node.on(p.EventType.TOUCH_MOVE,this.onTouchMove,this),this.sprHead.node.on(p.EventType.TOUCH_END,this.onTouchEnd,this),this.sprHead.node.on(p.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.graphics=this.node.getChildByName("nodeGraphics").getComponent(r),this.reset(),this._deltaX=-g.getVisibleSize().width/2+g.getDesignResolutionSize().width/2,this._deltaY=-g.getVisibleSize().height/2+g.getDesignResolutionSize().height/2},o.getArrow=function(t){if(this.arrows[t])return this.arrows[t];for(var i=this.arrows.length;i<t+1;++i){var e=new u,s=e.addComponent(c);s.spriteFrame=this.sprfArrow,this.arrows.push(s),this.graphics.node.addChild(e)}return this.arrows[t]},o.reset=function(){this.graphics.clear(),this.sprHead.node.position=new d(0,0,0),this.sprHead.node.active=!1,this._isMatchPark=!1},o.getPositions=function(){return this.positions},o.slicePositions=function(t){this.positions=this.positions.slice(t),this.reDrawPath()},o.reDrawPath=function(){if(0!==this.positions.length){this.graphics.clear(),this.graphics.moveTo(this.positions[0].x,this.positions[0].y);for(var t=1;t<this.positions.length;++t)this.graphics.lineTo(this.positions[t].x,this.positions[t].y);this.graphics.stroke()}},o.onTouchHeadStart=function(t){this._isMatchPark=!1,this._isMatchOut=!1,this._isDrawing=!0,t.propagationStopped=!0},o.onTouchStart=function(t){this._isDrawing=!0,this._isMatchPark=!1,this._isMatchOut=!1;var i=t.getUILocation(),e=m.getInstance().sceneGame.getCameraAnchorDelta();i.x=e.x+i.x*m.getInstance().sceneGame.getCameraHeightRatio(),i.y=e.y+i.y*m.getInstance().sceneGame.getCameraHeightRatio(),i.x+=this._deltaX*m.getInstance().sceneGame.getCameraHeightRatio(),this.sprHead.node.position=i.toVec3(),this.sprHead.node.active=!0,this.positions.length=0,this.positions.push(i),this.graphics.clear(),this.graphics.strokeColor=l.WHITE,this.graphics.lineWidth=5,this.graphics.moveTo(i.x,i.y),t.propagationStopped=!0},o.onTouchMove=function(t){var i=this;if(this._isDrawing){var e=t.getUILocation(),s=m.getInstance().sceneGame.getCameraAnchorDelta();if(e.x=s.x+e.x*m.getInstance().sceneGame.getCameraHeightRatio(),e.y=s.y+e.y*m.getInstance().sceneGame.getCameraHeightRatio(),e.x+=this._deltaX*m.getInstance().sceneGame.getCameraHeightRatio(),0===this.positions.length)this.positions.push(e),this.sprHead.node.position=e.toVec3(),this.graphics.moveTo(e.x,e.y);else{var n=!1;if(!this._isGettingOut)m.getInstance().getParkingSlotManager().getParkingSlots().forEach((function(t){var s=t.node.getChildByName("sprEntry").getComponent(f).getBoundingBoxToWorld();if(s.x+=i._deltaX,s.y+=i._deltaY,s.contains(e)){var o=t.node.getComponent(f).getBoundingBoxToWorld().center;o.x+=i._deltaX,o.y+=i._deltaY,i._isMatchPark=!0,i._isDrawing=!1,i.positions.pop(),i.positions.push(s.center),i.graphics.lineTo(s.center.x,s.center.y),i.positions.push(o),i.graphics.lineTo(o.x,o.y),i.sprHead.node.position=o.toVec3(),n=!0,y.inst.playOneShot("audio/audio_pop")}}));if(this._isGettingOut)m.getInstance().getParkingSlotManager().getGateOuts().forEach((function(t){var s=t.node.getComponent(f).getBoundingBoxToWorld();s.x+=i._deltaX,s.y+=i._deltaY,s.contains(e)&&(i._isDrawing=!1,i._isMatchOut=!0,i.positions.push(s.center),i.graphics.lineTo(s.center.x,s.center.y),i.sprHead.node.position=s.center.toVec3(),n=!0,y.inst.playOneShot("audio/audio_whoosh"))}));if(!n){var o=this.positions[this.positions.length-1];(Math.abs(e.x-o.x)>5||Math.abs(e.y-o.y)>5)&&(this.positions.push(e),this.sprHead.node.position=e.toVec3(),this.sprHead.node.active=!0,this.graphics.lineTo(e.x,e.y))}}this.graphics.stroke(),t.propagationStopped=!0}},o.onTouchEnd=function(t){if(this._isDrawing){var i=t.getUILocation(),e=m.getInstance().sceneGame.getCameraAnchorDelta();i.x=e.x+i.x*m.getInstance().sceneGame.getCameraHeightRatio(),i.y=e.y+i.y*m.getInstance().sceneGame.getCameraHeightRatio(),i.x+=this._deltaX*m.getInstance().sceneGame.getCameraHeightRatio(),console.log("End pos: ",i),this.positions.push(i),console.log("Current positions: ",this.positions),t.propagationStopped=!0}},o.onTouchCancel=function(t){this._isDrawing&&(console.log("Cancel pos: ",t.getUILocation()),console.log("Current positions: ",this.positions),t.propagationStopped=!0)},o.start=function(){},o.update=function(t){},o.isMatchPark=function(){return this._isMatchPark},o.isMatchOut=function(){return this._isMatchOut},o.isGettingOut=function(){return this._isGettingOut},o.setIsGettingOut=function(t){this._isGettingOut=t,this._isGettingOut&&(this._isMatchPark=!1)},o.setCar=function(t){this._car=t},i}(_)).prototype,"graphics",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=i(w.prototype,"sprfArrow",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=w))||H));o._RF.pop()}}}));

System.register("chunks:///_virtual/PathManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Path.ts","./GameManager.ts"],(function(t){var e,n,a,r,o,i,c,s,u,l,h;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,a=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){o=t.cclegacy,i=t._decorator,c=t.Prefab,s=t.instantiate,u=t.Component},function(t){l=t.Path},function(t){h=t.GameManager}],execute:function(){var p,f,d,g,P;o._RF.push({},"2d504Mw5IRANIdGfwqFTIJr","PathManager",void 0);var v=i.ccclass,y=i.property;t("PathManager",(p=v("PathManager"),f=y(c),p((P=e((g=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,a(e,"prefabPath",P,r(e)),e.pool=[],e.nodeCameraAnchor=void 0,e}n(e,t);var o=e.prototype;return o.onLoad=function(){h.getInstance().setPathManager(this),this.pool=[]},o.start=function(){},o.update=function(t){},o.getPath=function(){var t=s(this.prefabPath);return this.node.addChild(t),t.getComponent(l)},o.clearPaths=function(){this.node.removeAllChildren()},e}(u)).prototype,"prefabPath",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=g))||d));o._RF.pop()}}}));

System.register("chunks:///_virtual/Pickup.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CarType.ts","./Car.ts"],(function(t){var o,r,c,n,e;return{setters:[function(t){o=t.inheritsLoose},function(t){r=t.cclegacy,c=t._decorator},function(t){n=t.CarType},function(t){e=t.Car}],execute:function(){var i;r._RF.push({},"1ce0fKrtsBJdaSA326hY6o4","Pickup",void 0);var u=c.ccclass;c.property,t("Pickup",u("Pickup")(i=function(t){function r(){return t.apply(this,arguments)||this}return o(r,t),r.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._type=n.PICKUP},r}(e))||i);r._RF.pop()}}}));

System.register("chunks:///_virtual/SceneGame.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./SceneMain.ts","./AudioMgr.ts","./GameConfig.ts"],(function(e){var t,i,o,a,n,h,r,s,d,l,c,g,u,m,C,y,p,f,w,v,N,S,P,b,B,T,M,H,x,R,E,D,O,z,G,A,F,L,V,I;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.initializerDefineProperty,a=e.assertThisInitialized,n=e.createForOfIteratorHelperLoose},function(e){h=e.cclegacy,r=e._decorator,s=e.Material,d=e.Vec3,l=e.Label,c=e.Camera,g=e.Input,u=e.setDisplayStats,m=e.profiler,C=e.resources,y=e.view,p=e.clamp,f=e.lerp,w=e.Vec2,v=e.Node,N=e.UITransform,S=e.Graphics,P=e.Color,b=e.v3,B=e.ParticleSystem2D,T=e.ParticleAsset,M=e.director,H=e.PhysicsSystem2D,x=e.EPhysics2DDrawFlags,R=e.RigidBody2D,E=e.tween,D=e.UIOpacity,O=e.randomRangeInt,z=e.Sprite,G=e.Animation,A=e.Component},function(e){F=e.GameManager},function(e){L=e.SceneMain},function(e){V=e.AudioMgr},function(e){I=e.gameConfig}],execute:function(){var k,U,_,W,Z,Y,j,K,q,X,J;h._RF.push({},"fdb0bkEw0BK8qj+5gEg0V0r","SceneGame",void 0);var Q=r.ccclass,$=r.property;e("SceneGame",(k=Q("SceneGame"),U=$(s),_=$(s),W=$(s),Z=$(s),k((K=t((j=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),h=0;h<i;h++)n[h]=arguments[h];return(t=e.call.apply(e,[this].concat(n))||this).gameManager=void 0,t.lbScoreValue=void 0,t.camera=void 0,t.NodeCameraAnchor=void 0,t.isPinching=!1,t.midPoint=new d(0,0,0),t.baseDistance=0,t.nodeEffect=void 0,t.cheatCounter=0,o(t,"materialShadowTree",K,a(t)),o(t,"materialShadowGround",q,a(t)),o(t,"materialShadowCar",X,a(t)),o(t,"materialShadowPedestriant",J,a(t)),t.runFlashFunc=void 0,t.lbWaitingCar=void 0,t.lbParkingCar=void 0,t.lbParkedCar=void 0,t}i(t,e);var h=t.prototype;return h.onLoad=function(){this.gameManager=F.getInstance(),this.gameManager.setSceneGame(this),this.lbScoreValue=this.node.getChildByName("NodeUI").getChildByName("NodeTopLeft").getChildByName("loScore").getChildByName("lbScoreValue").getComponent(l),this.camera=this.node.getChildByName("Camera").getComponent(c),this.NodeCameraAnchor=this.node.getChildByName("NodeCameraAnchor"),this.node.on(g.EventType.MOUSE_WHEEL,this.onMouseWheel,this),this.node.on(g.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(g.EventType.TOUCH_MOVE,this.onTouchMove,this),this.node.on(g.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(g.EventType.TOUCH_CANCEL,this.onTouchCancel,this),this.nodeEffect=this.node.getChildByName("NodeEffect"),V.inst.isEnableMusic&&V.inst.play("audio/audio_bg_music",.5),u(!1),m.hideStats(),C.preload(["audio/countdown/ready","audio/countdown/3","audio/countdown/2","audio/countdown/1","audio/countdown/go"]),this.lbWaitingCar=this.node.getChildByPath("NodeUI/NodeTopRight/loWaiting/lbWaitingCar").getComponent(l),this.lbParkingCar=this.node.getChildByPath("NodeUI/NodeTopRight/loParking/lbParkingCar").getComponent(l),this.lbParkedCar=this.node.getChildByPath("NodeUI/NodeTopRight/loParked/lbParkedCar").getComponent(l)},h.getMaxCameraOrthoHeight=function(){y.getDesignResolutionSize();var e=y.getVisibleSize(),t=e.width/e.height;return t<1?e.height/2:e.width/2*t},h.setCameraOrthoHeight=function(e,t){this.camera.orthoHeight=p(e,y.getDesignResolutionSize().height/5,this.getMaxCameraOrthoHeight()),t?this.moveCamera(t.x,t.y):this.moveCamera(this.camera.node.position.x,this.camera.node.position.y)},h.moveCamera=function(e,t){y.getDesignResolutionSize();var i=y.getVisibleSize(),o=this.camera.node.position,a=new d(p(e,this.camera.orthoHeight*(i.width/2)/(i.height/2)-i.width/2,i.width/2-this.camera.orthoHeight*(i.width/2)/(i.height/2)),p(t,this.camera.orthoHeight-i.height/2,i.height/2-this.camera.orthoHeight),1e3);this.camera.node.position=new d(f(o.x,a.x,.5),f(o.y,a.y,.5),o.z),this.NodeCameraAnchor.position=new d(this.camera.node.position.x-this.camera.orthoHeight*(i.width/2)/(i.height/2),this.camera.node.position.y-this.camera.orthoHeight)},h.onMouseWheel=function(e){var t=e.getLocation();t.x-=y.getDesignResolutionSize().width/2,t.y-=y.getDesignResolutionSize().height/2,this.setCameraOrthoHeight(this.camera.orthoHeight-e.getScrollY()/10,t)},h.onTouchStart=function(e){var t=e.getAllTouches();if(2==t.length){var i=t[0],o=t[1],a=F.getInstance().sceneGame.getCameraAnchorDelta(),n=i.getUILocation();n.x=a.x+n.x*this.getCameraHeightRatio(),n.y=a.y+n.y*this.getCameraHeightRatio(),n.x+=-y.getVisibleSize().width/2*this.getCameraHeightRatio(),n.y-=y.getVisibleSize().height/2;var h=o.getUILocation();h.x=a.x+h.x*this.getCameraHeightRatio(),h.y=a.y+h.y*this.getCameraHeightRatio(),h.x+=-y.getVisibleSize().width/2*this.getCameraHeightRatio(),h.y-=y.getVisibleSize().height/2,this.midPoint=new d(n.x/2+h.x/2,n.y/2+h.y/2,0),this.isPinching=!0,this.baseDistance=w.distance(n,h)}},h.getNodeMidPoint=function(){if(!this.node.getChildByName("NodeMidPoint")){var e=new v;this.node.addChild(e);var t=e.addComponent(N);t.width=100,t.height=100;var i=t.getBoundingBox(),o=e.addComponent(S);o.rect(i.x,i.y,i.width,i.height),o.fill(),e.name="NodeMidPoint"}return this.node.getChildByName("NodeMidPoint")},h.getNodeTouchPoint1=function(){if(!this.node.getChildByName("getNodeTouchPoint1")){var e=new v;this.node.addChild(e);var t=e.addComponent(N);t.width=100,t.height=100;var i=t.getBoundingBox(),o=e.addComponent(S);o.rect(i.x,i.y,i.width,i.height),o.fillColor=P.BLACK,o.fill(),e.name="getNodeTouchPoint1"}return this.node.getChildByName("getNodeTouchPoint1")},h.getNodeTouchPoint2=function(){if(!this.node.getChildByName("getNodeTouchPoint2")){var e=new v;this.node.addChild(e);var t=e.addComponent(N);t.width=100,t.height=100;var i=t.getBoundingBox(),o=e.addComponent(S);o.rect(i.x,i.y,i.width,i.height),o.fillColor=P.YELLOW,o.fill(),e.name="getNodeTouchPoint2"}return this.node.getChildByName("getNodeTouchPoint2")},h.onTouchMove=function(e){var t=e.getAllTouches();if(this.isPinching){var i=t[0],o=t[1],a=F.getInstance().sceneGame.getCameraAnchorDelta(),n=i.getUILocation();n.x=a.x+n.x*this.getCameraHeightRatio(),n.y=a.y+n.y*this.getCameraHeightRatio(),n.x+=-y.getVisibleSize().width/2*this.getCameraHeightRatio(),n.y-=y.getVisibleSize().height/2;var h=o.getUILocation();h.x=a.x+h.x*this.getCameraHeightRatio(),h.y=a.y+h.y*this.getCameraHeightRatio(),h.x+=-y.getVisibleSize().width/2*this.getCameraHeightRatio(),h.y-=y.getVisibleSize().height/2;var r=w.distance(n,h),s=this.getCameraOrthoHeight(),d=new w(f(this.camera.node.position.x,this.midPoint.x,.2),f(this.camera.node.position.y,this.midPoint.y,.2));r>this.baseDistance?this.setCameraOrthoHeight(s-5,d):this.setCameraOrthoHeight(s+5,d)}else{var l=this.camera.node.position;this.moveCamera(l.x-1.2*e.getDeltaX(),l.y-1.2*e.getDeltaY())}},h.onTouchEnd=function(e){e.getAllTouches().length<2&&(this.isPinching=!1,this.baseDistance=0)},h.onTouchCancel=function(e){e.getAllTouches().length<2&&(this.isPinching=!1,this.baseDistance=0)},h.start=function(){this.setCameraOrthoHeight(this.getMaxCameraOrthoHeight())},h.update=function(e){this.gameManager.update(e)},h.setScore=function(e){this.lbScoreValue.string=e+""},h.setLife=function(e){this.node.getChildByName("NodeUI").getChildByName("NodeTopLeft").getChildByName("nodeLife").getChildByName("loLife").children.forEach((function(t,i){t.active=i<e}))},h.showBoom=function(e){e.x+=y.getDesignResolutionSize().width/2-y.getVisibleSize().width/2,e.y+=y.getDesignResolutionSize().height/2-y.getVisibleSize().height/2;var t=new v("effect");t.scale=b(.2,.2,.2);var i=t.addComponent(B);C.load("particles/particle_explosion",T,(function(e,t){e?console.error("Failed to load particle asset:",e):(i.file=t,i.playOnLoad=!0)})),i.autoRemoveOnFinish=!0,i.duration=1,this.nodeEffect.addChild(t),t.setPosition(e.toVec3()),setTimeout((function(){t.removeFromParent()}),1e3)},h.showGameOver=function(e){var t=this.node.getChildByName("NodeGameOver");t.active=!0,t.getChildByName("NodeBg").getChildByName("loScore").getChildByName("lbScore").getComponent(l).string="+"+e+" coins"},h.pauseGame=function(){console.log("Pause game"),M.pause(),V.inst.pause(),this.node.getChildByName("NodePause").active=!0},h.resumeGame=function(){this.node.getChildByName("NodePause").active=!1,M.resume(),V.inst.resume()},h.playAgain=function(){console.log("Play Again"),this.node.getChildByName("NodeGameOver").active=!1,this.gameManager.startGame()},h.cheat=function(){H.instance.debugDrawFlags=H.instance.debugDrawFlags==x.All?x.None:x.All},h.getNodeCameraAnchor=function(){return this.NodeCameraAnchor},h.getCameraAnchorDelta=function(){var e=y.getDesignResolutionSize(),t=this.getNodeCameraAnchor().getPosition();return new w(t.x+e.width/2,t.y+e.height/2)},h.getCameraOrthoHeight=function(){return this.camera.orthoHeight},h.getCameraHeightRatio=function(){y.getDesignResolutionSize();var e=y.getVisibleSize();return this.getCameraOrthoHeight()/(e.height/2)},h.onTouchBack=function(){this.gameManager.sendUpdatePoint(),V.inst.playOneShot("audio/audio_button_press"),M.loadScene("SceneMain",(function(e,t){t.getChildByName("Canvas").getComponent(L).showNodeMain()}))},h.onTouchHomeBack=function(){M.resume(),this.node.getChildByName("NodeGameOver").active=!1,this.node.getChildByName("NodePause").active=!1,this.onTouchBack()},h.setFog=function(e){if(this.nodeEffect.getChildByName("NodeFog").active=e,e){var t=new P(48,48,48,30),i=this.materialShadowCar.getProperty("shadowColor",0);console.log("Car color ne: ",i),this.materialShadowCar.setProperty("shadowColor",t),this.materialShadowGround.setProperty("shadowColor",t),this.materialShadowTree.setProperty("shadowColor",t),this.materialShadowPedestriant.setProperty("shadowColor",t)}},h.setRain=function(e){if(this.nodeEffect.getChildByName("NodeRain").active=e,V.inst.playRain(e),this.node.getChildByName("NodeGame").getChildByName("particle_rain_drop").active=e,e){var t=new P(48,48,48,20);this.materialShadowCar.getProperty("shadowColor",0);this.materialShadowCar.setProperty("shadowColor",t),this.materialShadowGround.setProperty("shadowColor",t),this.materialShadowTree.setProperty("shadowColor",t),this.materialShadowPedestriant.setProperty("shadowColor",t),this.timeOutFlash()}else this.runFlashFunc&&this.unschedule(this.runFlashFunc)},h.setPolice=function(e){var t=this.gameManager.getCurrentZoneId(),i=this.node.getChildByPath("NodeGame/NodeParkingSlotManager/Zone"+t);if(i){var o=i.getChildByName("NodePolice");if(o&&(o.active=e,e)){var a=o.getChildByName("NodePoliceCar"),n=a.getComponent(R);n.enabled=!1;E(a.getComponent(D)).to(2/8,{opacity:100}).to(2/8,{opacity:200}).to(2/8,{opacity:100}).to(2/8,{opacity:200}).to(2/8,{opacity:100}).to(2/8,{opacity:200}).to(2/8,{opacity:100}).to(2/8,{opacity:255}).call((function(){n.enabled=!0})).start()}}},h.timeOutFlash=function(){this.runFlashFunc=function(){this.runFlash()},this.scheduleOnce(this.runFlashFunc,O(8,16))},h.runFlash=function(){var e=this.nodeEffect.getChildByName("NodeRain").getChildByName("sprRainFlash").getComponent(z);e.node.active=!0,e.color=new P(255,255,255,O(100,150)),E(e).to(O(70,100)/1e3,{color:new P(255,255,255,O(180,220))}).to(O(120,180)/1e3,{color:new P(255,255,255,O(90,130))}).to(O(60,90)/1e3,{color:new P(255,255,255,O(200,240))}).call((function(){e.node.active=!1})).delay(O(500,2500)/1e3).call((function(){V.inst.playOneShot("audio/audio_thunder_"+O(0,2))})).start(),this.timeOutFlash()},h.resetShadows=function(){this.materialShadowCar.setProperty("shadowColor",new P(20,20,20,88)),this.materialShadowGround.setProperty("shadowColor",new P(20,20,20,88)),this.materialShadowTree.setProperty("shadowColor",new P(0,0,0,88)),this.materialShadowPedestriant.setProperty("shadowColor",new P(48,48,48,88))},h.onTouchCheatLevel=function(e,t){console.log("Cheat level ",t),this.gameManager._level=Number(t),this.gameManager._levelCounter=Number(t),this.gameManager.checkUpdateLevel()},h.showLevelWarning=function(e){var t=this.nodeEffect.getChildByName("lbLevelWarning").getComponent(l);t.string=e+"",t.node.active=!0,E(t.node.getComponent(D)).to(.3,{opacity:255}).to(.3,{opacity:100}).to(.3,{opacity:255}).to(.3,{opacity:100}).to(.3,{opacity:255}).to(.3,{opacity:100}).to(.3,{opacity:0}).call((function(){t.node.active=!1})).start()},h.loadZone=function(e){this.gameManager.setCurrentZoneId(e),this.gameManager.getParkingSlotManager().loadZone(e),this.gameManager.getWalerManager().loadBaseMap();for(var t,i=this.node.getChildByName("NodeDecor"),o=n(i.children);!(t=o()).done;){t.value.active=!1}var a=i.getChildByName("NodeZone"+e);a&&(a.active=!0)},h.updateCarsStatus=function(e,t,i){this.lbWaitingCar.string=e+"",this.lbParkingCar.string=t+"",this.lbParkedCar.string=i+""},h.runShakeScreen=function(){E(this.camera.node).to(.03,{position:new d(O(-10,10),O(-10,10),1e3)}).to(.03,{position:new d(O(-6,6),O(-6,6),1e3)}).to(.03,{position:new d(O(-8,8),O(-8,8),1e3)}).to(.03,{position:new d(O(-6,6),O(-6,6),1e3)}).to(.02,{position:new d(0,0,1e3)}).start()},h.showEffectHit=function(){var e=this.nodeEffect.getChildByName("sprEffectHit").getComponent(z);e.node.active=!0,E(e).to(.3,{color:new P(255,255,255,255)}).to(.2,{color:new P(255,255,255,127)}).to(.3,{color:new P(255,255,255,255)}).call((function(){e.node.active=!1})).start()},h.showExplosion=function(e){var t=this.nodeEffect.getChildByName("NodeExplosion").getComponent(G);t.node.position=e.toVec3(),t.play()},h.devShowCheat=function(){"dev"==I.buildMode&&(this.cheatCounter++,this.node.getChildByName("NodeCheat").active=this.cheatCounter>=15)},h.showNodeTut=function(){this.node.getChildByName("NodeTutorial").active=!0},h.showTutLevel=function(){this.loadZone(4),this.gameManager.getCarManager().genTutCar(),this.setVisibleUI(!1)},h.skipTutLevel=function(){F.getInstance().startGameAfterTut()},h.setVisibleUI=function(e){this.node.getChildByName("NodeUI").active=e},h.showTutGuide=function(e){var t=this.node.getChildByPath("NodeGame/NodeParkingSlotManager/Zone4/lbGuide").getComponent(l);t.string=e,E(t.node).to(.2,{scale:b(1.1,1.1,1.1)}).to(.2,{scale:b(1,1,1)}).to(.2,{scale:b(1.1,1.1,1.1)}).to(.2,{scale:b(1,1,1)}).start()},t}(A)).prototype,"materialShadowTree",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(j.prototype,"materialShadowGround",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(j.prototype,"materialShadowCar",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(j.prototype,"materialShadowPedestriant",[Z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=j))||Y));h._RF.pop()}}}));

System.register("chunks:///_virtual/SceneMain.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioMgr.ts","./LeaderboardMgr.ts","./SceneGame.ts","./UserModule.ts","./GameBridge.ts","./GameManager.ts"],(function(e){var t,n,o,i,a,d,s,c,u,r,h,g,l,S,p,N,m;return{setters:[function(e){t=e.inheritsLoose},function(e){n=e.cclegacy,o=e._decorator,i=e.director,a=e.view,d=e.tween,s=e.Vec3,c=e.PageView,u=e.Label,r=e.Sprite,h=e.Component},function(e){g=e.AudioMgr},function(e){l=e.LeaderboardMgr},function(e){S=e.SceneGame},function(e){p=e.UserModule},function(e){N=e.default},function(e){m=e.GameManager}],execute:function(){var f;n._RF.push({},"1a86f8wcSBIIIaY/vLs7rUA","SceneMain",void 0);var y=o.ccclass;o.property,e("SceneMain",y("SceneMain")(f=function(e){function n(){return e.apply(this,arguments)||this}t(n,e);var o=n.prototype;return o.start=function(){N.init(),i.preloadScene("SceneGame"),this.checkLocalSetting();new URLSearchParams(window.location.search);p.getInstance().onStartLobby(),this.updateCurrentPoint(p.getInstance().getCurrentPoint()),m.getInstance().loadNodeLoading()},o.onTouchStart=function(){this.showNodeMain()},o.showNodeMain=function(){this.node.getChildByName("NodeWelcome").active=!1;var e=this.node.getChildByName("NodeMain");e.x=a.getVisibleSize().width,e.active=!0,d(e).to(.15,{position:new s(0,0,0)}).start()},o.onTouchZone=function(e,t){m.getInstance().showLoading(),i.loadScene("SceneGame",(function(e,n){n.getChildByName("Canvas").getComponent(S).loadZone(Number(t)),m.getInstance().hideLoading()}))},o.onTouchClose=function(){var e=a.getVisibleSize();this.node.children.forEach((function(t){t.name.indexOf("Node")>=0&&"NodeMain"!=t.name&&d(t).to(.15,{position:new s(0,-e.height,0)}).call((function(){t.active=!1})).start()}));var t=this.node.getChildByName("NodeMain");t.y=a.getVisibleSize().height,t.active=!0,d(t).to(.15,{position:new s(0,0,0)}).start()},o.onTouchTutorial=function(){this.node.getChildByName("NodeMain").active=!1;var e=this.node.getChildByName("NodeTutorial");e.y=-a.getVisibleSize().height,e.active=!0,d(e).to(.15,{position:new s(0,0,0)}).start(),this.checkShowTutStart()},o.checkShowTutStart=function(){var e=this.node.getChildByName("NodeTutorial"),t=e.getChildByName("pvTutorial").getComponent(c).getCurrentPageIndex();e.getChildByName("NodeButton").active=7==t},o.onTouchQuickTut=function(){m.getInstance().showLoading(),i.loadScene("SceneGame",(function(e,t){t.getChildByName("Canvas").getComponent(S).loadZone(Number(0)),m.getInstance().setForceShowTutLevel(!0),m.getInstance().hideLoading()}))},o.onTouchLeaderboard=function(){this.node.getChildByName("NodeMain").active=!1;var e=this.node.getChildByName("NodeLeaderboard");e.y=-a.getVisibleSize().height,e.active=!0,d(e).to(.15,{position:new s(0,0,0)}).start()},o.onTouchSetting=function(){this.node.getChildByName("NodeMain").active=!1;var e=this.node.getChildByName("NodeSetting");e.y=-a.getVisibleSize().height,e.active=!0,d(e).to(.15,{position:new s(0,0,0)}).start()},o.onTouchTutStart=function(){var e=this.node.getChildByName("NodeTutorial");e.getChildByName("btnGo").active=!1,e.getChildByName("NodeButton").active=!1,e.getChildByName("btnPrevious").active=!1,e.getChildByName("btnNext").active=!1,g.inst.playOneShot("audio/audio_button_press"),this.onTouchClose()},o.onPageViewTutEvent=function(e,t){this.checkShowTutStart()},o.onTouchSettingMusic=function(e){g.inst.toggleMusic(),g.inst.playOneShot("audio/audio_button_press"),this.updateButtonMusic()},o.updateButtonMusic=function(){var e=this.node.getChildByPath("NodeSetting/loSetting/sprMusic/btnMusic"),t=e.getChildByName("Label").getComponent(u),n=e.getComponent(r),o=g.inst.isEnableMusic,i=o?"ON":"OFF";t&&(t.string=i),n&&(n.grayscale=!o)},o.onTouchSettingSound=function(e){g.inst.toggleSound(),g.inst.playOneShot("audio/audio_button_press"),this.updateButtonSound()},o.updateButtonSound=function(){var e=this.node.getChildByPath("NodeSetting/loSetting/sprSound/btnSound"),t=e.getChildByName("Label").getComponent(u),n=e.getComponent(r),o=g.inst.isEnableSound,i=o?"ON":"OFF";t&&(t.string=i),n&&(n.grayscale=!o)},o.checkLocalSetting=function(){var e="false"!=cc.sys.localStorage.getItem("isEnableMusic"),t="false"!=cc.sys.localStorage.getItem("isEnableSound");g.inst.setEnableMusic(e),g.inst.setEnableSound(t),this.updateButtonMusic(),this.updateButtonSound(),g.inst.play("audio/audio_bg_music",.5),g.inst.playRain(!1)},o.updateUserInfo=function(e){this.updateCurrentPoint(e.currentPoint)},o.updateCurrentPoint=function(e){isNaN(e)&&(e=0),this.node.getChildByPath("NodeMain/NodeTopLeft/loStar/lbStar").getComponent(u).string=e+""},o.updateLeaderboardInfo=function(e){var t=this.node.getChildByName("NodeLeaderboard");t.getComponent(l).updateLeaderboardInfo(e),t.getChildByName("NodeLeaderboardEmpty").active=0==e.length},n}(h))||f);n._RF.pop()}}}));

System.register("chunks:///_virtual/Sedan.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Car.ts","./CarType.ts"],(function(t){var n,e,o,r,c;return{setters:[function(t){n=t.inheritsLoose},function(t){e=t.cclegacy,o=t._decorator},function(t){r=t.Car},function(t){c=t.CarType}],execute:function(){var a;e._RF.push({},"e56e35nbRFPoKm4WdLotQkQ","Sedan",void 0);var i=o.ccclass;o.property,t("Sedan",i("Sedan")(a=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._type=c.SEDAN},e}(r))||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/Suv.ts",["./rollupPluginModLoBabelHelpers.js","cc","./CarType.ts","./Car.ts"],(function(t){var n,o,r,e,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator},function(t){e=t.CarType},function(t){c=t.Car}],execute:function(){var u;o._RF.push({},"accb1jRn6tNSIAYANe3bfhF","Suv",void 0);var i=r.ccclass;r.property,t("Suv",i("Suv")(u=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._type=e.SUV},o}(c))||u);o._RF.pop()}}}));

System.register("chunks:///_virtual/UserModule.ts",["cc","./SceneMain.ts","./GameBridge.ts"],(function(e){var t,n,i,o;return{setters:[function(e){t=e.cclegacy,n=e.director},function(e){i=e.SceneMain},function(e){o=e.default}],execute:function(){t._RF.push({},"4f640CFrH1D4aHOX/Ijqx9S","UserModule",void 0),e("UserModule",function(){function e(){this.userId="Ickui7l1Ua1Cf1oQBCbu",this.leaderboardInfo=[],this.baseUrl=void 0,this.token=void 0,this.userApi=void 0,this.parkingApi=void 0,this.version=void 0,this.userInfo=void 0,this.baseUrl="http://192.168.88.211:5001"}e.getInstance=function(){return this._instance||(this._instance=new e),this._instance};var t=e.prototype;return t.setUserId=function(e){this.userId=e||"Ickui7l1Ua1Cf1oQBCbu"},t.setBaseUrl=function(e){if(console.log("Base URL: ",e),!e)return console.log("Set default baseUrl: ",o.state.apiConfig.baseUrl),void(this.baseUrl=o.state.apiConfig.baseUrl);this.baseUrl=e},t.setVersion=function(e){if(console.log("version: ",e),!e)return console.log("Set default baseUrl: ",o.state.apiConfig.version),void(this.version=o.state.apiConfig.version);this.version=e},t.updateURLParams=function(e){this.setToken(e.get("token")),this.setBaseUrl(e.get("baseUrl")),this.setUserApi(e.get("userApi")),this.setParkingApi(e.get("parkingApi")),this.setUserId(e.get("userId")),this.setVersion(e.get("version"))},t.setUserApi=function(e){if(console.log("UserApi: ",e),!e)return console.log("Set default userApi: ",o.state.apiConfig.userApi),void(this.userApi=o.state.apiConfig.userApi);this.userApi=e},t.setParkingApi=function(e){if(console.log("parkingApi: ",e),!e)return console.log("Set default parkingApi: ",o.state.apiConfig.parkingApi),void(this.parkingApi=o.state.apiConfig.parkingApi);this.parkingApi=e},t.setToken=function(e){this.token=e},t.onStartLobby=function(){this.sendGetUserInfo(),this.sendGetLeaderboardInfo()},t.sendGetUserInfo=function(){var e=this,t=""+o.state.apiConfig.baseUrl+o.state.apiConfig.userApi+"/"+o.state.apiConfig.version+"/users/"+o.state.userId+"/lobby";fetch(t,{method:"GET",headers:{Authorization:"Bearer "+o.state.token}}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: "+e.status);return e.json()})).then((function(t){e.onReceiveUserInfo(t.data)})).catch((function(t){console.error("Error fetching data:",t),e.onReceiveUserInfo(null)}))},t.onReceiveUserInfo=function(e){if(e){this.userInfo=e;var t=n.getScene().getChildByName("Canvas").getComponent(i);t&&t.updateUserInfo(e)}},t.sendGetLeaderboardInfo=function(){var e=this,t=""+o.state.apiConfig.baseUrl+o.state.apiConfig.userApi+"/"+o.state.apiConfig.version+"/leaderboard/users";fetch(t,{method:"GET",headers:{Authorization:"Bearer "+o.state.token}}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: "+e.status);return e.json()})).then((function(t){e.onReceiveLeaderboardInfo(t.data)})).catch((function(t){console.error("Error fetching data:",t),e.onReceiveLeaderboardInfo([])}))},t.onReceiveLeaderboardInfo=function(e){e.sort((function(e,t){return t.gamePoint-e.gamePoint})),e.forEach((function(e,t){e.rank=t}));var t=n.getScene().getChildByName("Canvas").getComponent(i);t&&t.updateLeaderboardInfo(e)},t.sendUpdatePoint=function(e,t){this.userInfo||(this.userInfo={}),this.userInfo.currentPoint||(this.userInfo.currentPoint=0),this.userInfo.currentPoint+=e;var n=""+o.state.apiConfig.baseUrl+o.state.apiConfig.userApi+"/"+o.state.apiConfig.version+"/users/"+o.state.userId+"/pointsHistory",i={points:this.userInfo.currentPoint};fetch(n,{method:"POST",headers:{"Content-Type":"application/json","Accept-Encoding":"gzip, deflate, br",Connection:"keep-alive",Authorization:"Bearer "+o.state.token},body:JSON.stringify(i)}).then((function(e){if(!e.ok)throw new Error("HTTP error! status: "+e.status);return e.json()})).then((function(e){console.log("API Response:",e)})).catch((function(e){console.error("Error fetching data:",e)}))},t.getCurrentPoint=function(){return this.userInfo&&this.userInfo.currentPoint?this.userInfo.currentPoint:0},e}())._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/Utils.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"23544wWV6JH8YRN1g8+V76q","Utils",void 0);t("formatNumber",(function(t){return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}));e._RF.pop()}}}));

System.register("chunks:///_virtual/Van.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Car.ts","./CarType.ts"],(function(t){var n,o,r,e,c;return{setters:[function(t){n=t.inheritsLoose},function(t){o=t.cclegacy,r=t._decorator},function(t){e=t.Car},function(t){c=t.CarType}],execute:function(){var a;o._RF.push({},"e5197ddpLtOj4SS9o+8nXjm","Van",void 0);var i=r.ccclass;r.property,t("Van",i("Van")(a=function(t){function o(){return t.apply(this,arguments)||this}return n(o,t),o.prototype.onLoad=function(){t.prototype.onLoad.call(this),this._type=c.VAN},o}(e))||a);o._RF.pop()}}}));

System.register("chunks:///_virtual/Walker.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var i,e,a,n,o,s,r,h,p,l,c,g,d,m,y,u;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.inheritsLoose,a=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){o=t.cclegacy,s=t._decorator,r=t.SpriteFrame,h=t.RigidBody2D,p=t.Sprite,l=t.Graphics,c=t.Color,g=t.Animation,d=t.UIOpacity,m=t.tween,y=t.Vec2,u=t.Component}],execute:function(){var f,v,M,N,x,w,A,b,k;o._RF.push({},"060e3HVYkBA24KkdpuNVD9v","Walker",void 0);var _=s.ccclass,P=s.property,F=t("WalkerType",function(t){return t.MAN="animation_man_walk",t.RED_MAN="animation_red_man_walk",t.WOMAN="animation_woman_walk",t}({}));t("Walker",(f=_("Walker"),v=P(r),M=P(r),N=P(r),f((A=i((w=function(t){function i(){for(var i,e=arguments.length,o=new Array(e),s=0;s<e;s++)o[s]=arguments[s];return(i=t.call.apply(t,[this].concat(o))||this).targets=[],i._isStart=void 0,i.rigidBody=void 0,i.sprTarget=void 0,i.graphics=void 0,i.angle=void 0,i.NodeAnimation=void 0,i.clipName=void 0,a(i,"spriteFrameMan",A,n(i)),a(i,"spriteFrameRedMan",b,n(i)),a(i,"spriteFrameWoman",k,n(i)),i}e(i,t);var o=i.prototype;return o.start=function(){this.readyToStart()},o.onLoad=function(){this.rigidBody=this.node.getComponent(h),this.sprTarget=this.node.getChildByName("sprTarget").getComponent(p),this.graphics=this.node.getChildByName("NodePath").getComponent(l),this.graphics.strokeColor=c.GRAY,this.graphics.lineWidth=3,this.NodeAnimation=this.node.getChildByName("NodeAnimation");var t=Object.keys(F),i=t[Math.floor(Math.random()*t.length)];this.clipName=F[i];var e=this.spriteFrameMan;switch(this.clipName){case F.RED_MAN:e=this.spriteFrameRedMan;break;case F.WOMAN:e=this.spriteFrameWoman;break;default:e=this.spriteFrameMan}this.NodeAnimation.getComponent(p).spriteFrame=e,this.NodeAnimation.getComponent(g).play(this.clipName)},o.setTargets=function(t){this.targets=[].concat(t)},o.readyToStart=function(){var t=this;this._isStart=!1,this.sprTarget.enabled=!1,this.rigidBody.enabled=!1,this.node.getComponent(d).opacity=200,m(this.node.getComponent(d)).to(.4,{opacity:100}).to(.4,{opacity:200}).to(.4,{opacity:100}).to(.4,{opacity:200}).to(.4,{opacity:255}).call((function(){t.startWalk(),t.rigidBody.enabled=!0})).start()},o.getMapPosition=function(t){return new y(t.x-this.node.position.x,t.y-this.node.position.y)},o.reDrawPath=function(){if(0!==this.targets.length){this.sprTarget.enabled=!0,this.graphics.clear();for(var t=0;t<this.targets.length;++t){var i=0,e=0;t>0&&(i=this.getMapPosition(this.targets[t-1]).x,e=this.getMapPosition(this.targets[t-1]).y);for(var a=i,n=e,o=this.getMapPosition(this.targets[t]).x,s=this.getMapPosition(this.targets[t]).y,r=Math.sqrt(Math.pow(o-a,2)+Math.pow(s-n,2)),h=(o-a)/r,p=(s-n)/r;r>0;){this.graphics.moveTo(i,e);var l=Math.min(10,r);i+=l*h,e+=l*p,this.graphics.lineTo(i,e),r-=15;var c=Math.min(5,r);i+=c*h,e+=c*p}}this.graphics.stroke(),this.targets[this.targets.length-1]&&(this.sprTarget.node.position=this.targets[this.targets.length-1].toVec3().subtract(this.node.position))}},o.startWalk=function(){this._isStart=!0,this.NodeAnimation.getComponent(g).play(this.clipName),this.reDrawPath()},o.stop=function(){this._isStart=!1,this.NodeAnimation.getComponent(g).stop()},o.update=function(t){this._isStart&&this.moveWithPath(t)},o.getSpeed=function(){return 10},o.moveWithPath=function(t){for(var i=t*this.getSpeed(),e=0,a=-1,n=this.targets;e<i&&a<n.length-1;)e+=0===++a?y.distance(this.node.position.toVec2(),n[a]):y.distance(n[a],n[a-1]);var o=new y(n[a].x,n[a].y),s=new y(n[a].x-this.node.position.x,n[a].y-this.node.position.y),r=180*Math.atan(s.y/s.x)/Math.PI-90+(s.x<0?-180:0);if(i<e){var h,p=e-i,l=this.node.position.toVec2();if(0===(h=y.distance(n[a],l)))o=n[a];else{var c=(h-p)/h;o.x=l.x+(n[a].x-l.x)*c,o.y=l.y+(n[a].y-l.y)*c}s=new y(o.x-l.x,o.y-l.y),r=(180*Math.atan2(s.y,s.x)/Math.PI-90)%360,r=this.normalizeAngle(r),this.targets=this.targets.slice(a),this.reDrawPath()}else s=new y(n[a].x-this.node.position.x,n[a].y-this.node.position.y),this.targets=this.targets.slice(n.length),this.onFinishPath();this.angle=r,this.node.x=o.x,this.node.y=o.y,this.NodeAnimation.angle=this.angle},o.normalizeAngle=function(t){return(t%360+360)%360},o.onFinishPath=function(){this.node.active=!1},i}(u)).prototype,"spriteFrameMan",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),b=i(w.prototype,"spriteFrameRedMan",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),k=i(w.prototype,"spriteFrameWoman",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=w))||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/WalkerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManager.ts","./Car.ts","./Walker.ts","./GameConfig.ts"],(function(e){var t,a,r,n,o,i,h,s,u,f,l,c,p,v;return{setters:[function(e){t=e.inheritsLoose,a=e.createForOfIteratorHelperLoose},function(e){r=e.cclegacy,n=e._decorator,o=e.UITransform,i=e.resources,h=e.instantiate,s=e.Vec2,u=e.randomRangeInt,f=e.Component},function(e){l=e.GameManager},function(e){c=e.CarState},function(e){p=e.Walker},function(e){v=e.gameConfig}],execute:function(){var d;r._RF.push({},"aa9a5GZg11MD5vgN0SoflTj","WalkerManager",void 0);var g=n.ccclass,M=(n.property,e("WalkerManager",g("WalkerManager")(d=function(e){function r(){for(var t,a=arguments.length,r=new Array(a),n=0;n<a;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))||this)._mapRate=1,t._timeOutGenNewWave=void 0,t._scheduler=void 0,t.prefabWalker=void 0,t.walkers=[],t.baseMap=void 0,t}t(r,e);var n=r.prototype;return n.onLoad=function(){l.getInstance().setWalkerManager(this),this.loadResources()},n.loadBaseMap=function(){var e=this._mapRate,t=360*e,r=680*e,n=8*e,i=l.getInstance().getParkingSlotManager().getNodeGround();this.baseMap=Array.from({length:t},(function(){return new Array(r).fill(0)}));for(var h,s=a(i.children);!(h=s()).done;){var u=h.value.getComponent(o).getBoundingBox();u.x*=e,u.y*=e,u.width*=e,u.height*=e;for(var f=Math.max(0,Math.floor(u.x-n)),c=Math.max(0,Math.floor(u.y-n)),p=Math.min(t-1,Math.floor(u.x+u.width+n)),v=Math.min(r-1,Math.floor(u.y+u.height+n)),d=c;d<=v;d++)for(var g=f;g<=p;g++)this.baseMap[g][d]=1}},n.loadPrefabs=function(){var e=this;i.load("prefabs/PrefabWalker",(function(t,a){e.prefabWalker=a,e.onFinishLoadResources()}))},n.loadResources=function(){this.loadPrefabs()},n.onFinishLoadResources=function(){},n.start=function(){},n.update=function(e){},n.getNewWalker=function(){return h(this.prefabWalker).getComponent(p)},n.genRandomPath=function(){for(var e,t=l.getInstance().getCarManager().getCars().filter((function(e){return e._state===c.PARKING||e._state===c.PARKED})),r=[].concat(this.baseMap),n=a(t);!(e=n()).done;)for(var i=e.value.getComponent(o).getBoundingBox(),h=Math.max(0,Math.floor(i.x-15)),f=Math.max(0,Math.floor(i.y-15)),p=Math.min(359,Math.floor(i.x+i.width+15)),v=Math.min(679,Math.floor(i.y+i.height+15)),d=f;d<=v;d++)for(var g=h;g<=p;g++)r[g][d]=1;for(var y=[50,310],x=[60,500],w=[],_=new s(Math.floor(u(y[0],y[1])*this._mapRate),Math.floor(u(x[0],x[1])*this._mapRate));1===r[_.x][_.y];)_=new s(Math.floor(u(y[0],y[1])*this._mapRate),Math.floor(u(x[0],x[1])*this._mapRate));for(var k,W=new s(Math.floor(u(y[0],y[1])*this._mapRate),Math.floor(u(x[0],x[1])*this._mapRate));1===r[W.x][W.y];)W=new s(Math.floor(u(y[0],y[1])*this._mapRate),Math.floor(u(x[0],x[1])*this._mapRate));if(!(k=function(e,t,r,n){void 0===n&&(n=.125);for(var o=e.length,i=e[0].length,h=Math.floor(o*n),s=Math.floor(i*n),u=o/h,f=i/s,l=[],c=0;c<h;c++){l[c]=[];for(var p=0;p<s;p++){for(var v=Math.floor(c*u),d=Math.floor(p*f),g=Math.floor((c+1)*u),y=Math.floor((p+1)*f),x=!1,w=v;w<g;w++){for(var _=d;_<y;_++)if(e[w]&&1===e[w][_]){x=!0;break}if(x)break}l[c][p]=x?1:0}}var k={x:Math.floor(t.x*(s/i)),y:Math.floor(t.y*(h/o))},W={x:Math.floor(r.x*(s/i)),y:Math.floor(r.y*(h/o))},R=l.length,b=l[0].length,G=function(e,t,a,r){return Math.abs(e-a)+Math.abs(t-r)},N=new M;N.enqueue(k,G(k.x,k.y,W.x,W.y));var P=new Map,C=new Set,O=null;for(;!N.isEmpty();){var A=N.dequeue().node,E=A.x+","+A.y;if(!C.has(E)){if(C.add(E),A.x===W.x&&A.y===W.y){O=A;break}for(var I,S=m(A.x,A.y),B=a(S);!(I=B()).done;){var D=I.value;if(D.x>=0&&D.x<R&&D.y>=0&&D.y<b&&0===l[D.x][D.y]&&!C.has(D.x+","+D.y)){var F=D.x+","+D.y;P.set(F,A);var L=G(D.x,D.y,W.x,W.y);N.enqueue(D,L)}}}}if(!O)return null;var T=function(e){for(var t=[],a=e;a;){t.push({x:a.x,y:a.y});var r=a.x+","+a.y;a=P.get(r)}return t.reverse()}(O).map((function(e){return{x:Math.floor(e.x*f+f/2),y:Math.floor(e.y*u+u/2)}}));T.unshift(t),(T[T.length-1].x!==r.x||T[T.length-1].y!==r.y)&&T.push(r);return T}(r,{x:_.x,y:_.y},{x:W.x,y:W.y},.03125)))return[];for(var R,b=a(k);!(R=b()).done;){var G=R.value,N=Math.floor(G.x/1),P=Math.floor(G.y/1);if(0!==w.length){var C=w[w.length-1];N!=C.x&&P!=C.y&&w.push(new s(N,P))}else w.push(new s(N,P))}for(var O=0,A=w;O<A.length;O++){var E=A[O];E.x*=1,E.y*=1}return w},n.genNewWave=function(){for(var e=this,t=v.numPedestrian,a=u(t[0],t[1]+1),r=function(){var t=e.getNewWalker();e.scheduleOnce((function(){if(e.node){e.node.addChild(t.node);for(var a=e.genRandomPath();0===a.length;)a=e.genRandomPath();t.setTargets(a),t.node.position=a[0].toVec3(),t.reDrawPath(),e.walkers.push(t),t.readyToStart()}}),u(0,5))},n=0;n<a;++n)r();this.timeOutGenNewWave()},n.timeOutGenNewWave=function(){this._scheduler=function(){this.genNewWave()};var e=v.timeOutGenPedestrian;this.scheduleOnce(this._scheduler,u(e[0],e[1]))},n.clearWalkers=function(){this.walkers.forEach((function(e){e.node.removeFromParent()})),this.walkers=[]},n.onStartGame=function(){this._timeOutGenNewWave&&clearTimeout(this._timeOutGenNewWave),this._scheduler&&this.unschedule(this._scheduler),this.unscheduleAllCallbacks(),this.clearWalkers(),this.genNewWave()},n.onEndGame=function(){this._timeOutGenNewWave&&clearTimeout(this._timeOutGenNewWave),this._scheduler&&this.unschedule(this._scheduler),this.unscheduleAllCallbacks()},n.stopAllWalers=function(){this.walkers.forEach((function(e){e.stop()}))},r}(f))||d),function(){function e(){this.heap=void 0,this.heap=[]}var t=e.prototype;return t.dequeue=function(){if(this.isEmpty())return null;this.swap(0,this.heap.length-1);var e=this.heap.pop();return this.siftDown(0),e},t.enqueue=function(e,t){this.heap.push({node:e,heuristic:t}),this.siftUp(this.heap.length-1)},t.isEmpty=function(){return 0===this.heap.length},t.siftUp=function(e){for(var t=Math.floor((e-1)/2);e>0&&this.heap[e].heuristic<this.heap[t].heuristic;)this.swap(e,t),e=t,t=Math.floor((e-1)/2)},t.siftDown=function(e){var t=e,a=2*e+1,r=2*e+2;a<this.heap.length&&this.heap[a].heuristic<this.heap[t].heuristic&&(t=a),r<this.heap.length&&this.heap[r].heuristic<this.heap[t].heuristic&&(t=r),e!==t&&(this.swap(e,t),this.siftDown(t))},t.swap=function(e,t){var a=[this.heap[t],this.heap[e]];this.heap[e]=a[0],this.heap[t]=a[1]},e}());function m(e,t){return[[-1,-1],[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0],[1,1]].map((function(a){var r=a[0],n=a[1];return{x:e+r,y:t+n}}))}r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});